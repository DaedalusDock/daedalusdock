<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="stylesheet" href="dmdoc.css"><title>/area - Daedalus Dock</title></head><body><header><a href="index.html">Daedalus Dock</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> â€” <a href="area.html#var">Var Details</a> - <a href="area.html#proc">Proc Details</a></header><main><h1>area <aside>/<a href="area.html">area</a></aside><aside> inherits /<a href="atom.html">atom</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L6"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 6"></a></h1><p>A grouping of tiles into a logical space, mostly used by map editors</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="area.html#var/active_alarms">active_alarms</a></th><td>Alarm type to count of sources. Not usable for ^ because we handle fires differently</td></tr><tr><th><a href="area.html#var/airalarms">airalarms</a></th><td>A list of all air alarms in this area</td></tr><tr><th><a href="area.html#var/airlock_wires">airlock_wires</a></th><td>Wire assignment for airlocks in this area</td></tr><tr><th><a href="area.html#var/always_unpowered">always_unpowered</a></th><td>This gets overridden to 1 for space in area/.</td></tr><tr><th><a href="area.html#var/ambient_buzz">ambient_buzz</a></th><td>The background droning loop that plays 24/7</td></tr><tr><th><a href="area.html#var/ambient_buzz_vol">ambient_buzz_vol</a></th><td>The volume of the ambient buzz</td></tr><tr><th><a href="area.html#var/ambientsounds">ambientsounds</a></th><td>A list of sounds to pick from every so often to play to clients.</td></tr><tr><th><a href="area.html#var/area_has_base_lighting">area_has_base_lighting</a></th><td>Whether this area has a currently active base lighting, bool</td></tr><tr><th><a href="area.html#var/area_lighting">area_lighting</a></th><td>What type of lighting this area uses</td></tr><tr><th><a href="area.html#var/area_limited_icon_smoothing">area_limited_icon_smoothing</a></th><td>Typepath to limit the areas (subtypes included) that atoms in this area can smooth with. Used for shuttles.</td></tr><tr><th><a href="area.html#var/areasize">areasize</a></th><td>Size of the area in open turfs, only calculated for indoors areas.</td></tr><tr><th><a href="area.html#var/base_lighting_alpha">base_lighting_alpha</a></th><td>alpha 1-255 of lighting_effect and thus baselighting intensity. If you want this to be zero, use AREA_LIGHTING_NONE instead!</td></tr><tr><th><a href="area.html#var/base_lighting_color">base_lighting_color</a></th><td>The colour of the light acting on this area</td></tr><tr><th><a href="area.html#var/beauty">beauty</a></th><td>Beauty average per open turf in the area</td></tr><tr><th><a href="area.html#var/beauty_threshold">beauty_threshold</a></th><td>If a room is too big it doesn't have beauty.</td></tr><tr><th><a href="area.html#var/contained_turfs">contained_turfs</a></th><td>List of all turfs currently inside this area. Acts as a filtered bersion of area.contents
For faster lookup (area.contents is actually a filtered loop over world)
Semi fragile, but it prevents stupid so I think it's worth it</td></tr><tr><th><a href="area.html#var/fire_detect">fire_detect</a></th><td>A var for whether the area allows for detecting fires/etc. Disabled or enabled at a fire alarm.</td></tr><tr><th><a href="area.html#var/firealarms">firealarms</a></th><td>A list of all fire alarms in this area OR ADJACENT TO IT</td></tr><tr><th><a href="area.html#var/firedoors">firedoors</a></th><td>A list of all fire locks in this area and on the border of this area.</td></tr><tr><th><a href="area.html#var/flavor_text_key">flavor_text_key</a></th><td>Cache key. Set in init.</td></tr><tr><th><a href="area.html#var/flavor_texts">flavor_texts</a></th><td>A weighted list of flavor texts for display_flavor().</td></tr><tr><th><a href="area.html#var/forced_ambience">forced_ambience</a></th><td>Does this area immediately play an ambience track upon enter?</td></tr><tr><th><a href="area.html#var/lighting_effect">lighting_effect</a></th><td>The mutable appearance we underlay to show light</td></tr><tr><th><a href="area.html#var/lights">lights</a></th><td>All the lights in this area</td></tr><tr><th><a href="area.html#var/map_generator">map_generator</a></th><td>This datum, if set, allows terrain generation behavior to be ran on Initialize()</td></tr><tr><th><a href="area.html#var/max_ambience_cooldown">max_ambience_cooldown</a></th><td>Used to decide what the maximum time between ambience is</td></tr><tr><th><a href="area.html#var/min_ambience_cooldown">min_ambience_cooldown</a></th><td>Used to decide what the minimum time between ambience is</td></tr><tr><th><a href="area.html#var/outdoors">outdoors</a></th><td>For space, the asteroid, etc. Used with blueprints or with weather to determine if we are adding a new area (vs editing a station room)</td></tr><tr><th><a href="area.html#var/requires_power">requires_power</a></th><td>Will objects this area be needing power?</td></tr><tr><th><a href="area.html#var/sound_environment">sound_environment</a></th><td>Used to decide what kind of reverb the area makes sound have</td></tr><tr><th><a href="area.html#var/spook_level">spook_level</a></th><td>Used by ghosts to grant new powers. See /datum/component/spook_factor</td></tr><tr><th><a href="area.html#var/totalbeauty">totalbeauty</a></th><td>All beauty in this area combined, only includes indoor area.</td></tr><tr><th><a href="area.html#var/turfs_to_uncontain">turfs_to_uncontain</a></th><td>Contained turfs is a MASSIVE list, so rather then adding/removing from it each time we have a problem turf
We should instead store a list of turfs to REMOVE from it, then hook into a getter for it
There is a risk of this and contained_turfs leaking, so a subsystem will run it down to 0 incrementally if it gets too large</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="area.html#proc/AllowDrop">AllowDrop</a></th><td>Causes a runtime error</td></tr><tr><th><a href="area.html#proc/Destroy">Destroy</a></th><td>Destroy an area and clean it up</td></tr><tr><th><a href="area.html#proc/Entered">Entered</a></th><td>Call back when an atom enters an area</td></tr><tr><th><a href="area.html#proc/Exited">Exited</a></th><td>Called when an atom exits an area</td></tr><tr><th><a href="area.html#proc/LateInitialize">LateInitialize</a></th><td>Sets machine power levels in the area</td></tr><tr><th><a href="area.html#proc/New">New</a></th><td>Called when an area loads</td></tr><tr><th><a href="area.html#proc/PlaceOnTopReact">PlaceOnTopReact</a></th><td>A hook so areas can modify the incoming args (of what??)</td></tr><tr><th><a href="area.html#proc/addStaticPower">addStaticPower</a></th><td>Add a static amount of power load to an area</td></tr><tr><th><a href="area.html#proc/adjust_spook_level">adjust_spook_level</a></th><td>Adjusts the spook level and sends out a signal</td></tr><tr><th><a href="area.html#proc/burglaralert">burglaralert</a></th><td>Raise a burglar alert for this area</td></tr><tr><th><a href="area.html#proc/cannonize_contained_turfs">cannonize_contained_turfs</a></th><td>Ensures that the contained_turfs list properly represents the turfs actually inside us</td></tr><tr><th><a href="area.html#proc/clear_usage">clear_usage</a></th><td>Clear all non-static power usage in area</td></tr><tr><th><a href="area.html#proc/close_and_lock_door">close_and_lock_door</a></th><td>Close and lock a door passed into this proc</td></tr><tr><th><a href="area.html#proc/communicate_fire_alert">communicate_fire_alert</a></th><td>Called by airalarms and firealarms to communicate the status of the area to relevant machines</td></tr><tr><th><a href="area.html#proc/create_area_lighting_objects">create_area_lighting_objects</a></th><td>regenerates lighting objects for turfs in this area, primary use is VV changes</td></tr><tr><th><a href="area.html#proc/drop_location">drop_location</a></th><td>Causes a runtime error</td></tr><tr><th><a href="area.html#proc/get_flavor_string">get_flavor_string</a></th><td>Returns a string to display</td></tr><tr><th><a href="area.html#proc/has_contained_turfs">has_contained_turfs</a></th><td>Returns TRUE if we have contained turfs, FALSE otherwise</td></tr><tr><th><a href="area.html#proc/on_joining_game">on_joining_game</a></th><td>Called when a living mob that spawned here, joining the round, receives the player client.</td></tr><tr><th><a href="area.html#proc/play_ambience">play_ambience</a></th><td>Attempts to play an ambient sound to a mob, returning the cooldown in deciseconds</td></tr><tr><th><a href="area.html#proc/power_change">power_change</a></th><td>Called when the area power status changes</td></tr><tr><th><a href="area.html#proc/powered">powered</a></th><td>Returns int 1 or 0 if the area has power for the given channel</td></tr><tr><th><a href="area.html#proc/reg_in_areas_in_z">reg_in_areas_in_z</a></th><td>Register this area as belonging to a z level</td></tr><tr><th><a href="area.html#proc/removeStaticPower">removeStaticPower</a></th><td>Remove a static amount of power load to an area</td></tr><tr><th><a href="area.html#proc/remove_area_lighting_objects">remove_area_lighting_objects</a></th><td>Removes lighting objects from turfs in this area if we have them, primary use is VV changes</td></tr><tr><th><a href="area.html#proc/setup">setup</a></th><td>Setup an area (with the given name)</td></tr><tr><th><a href="area.html#proc/update_areasize">update_areasize</a></th><td>Set the area size of the area</td></tr><tr><th><a href="area.html#proc/update_beauty">update_beauty</a></th><td>Divides total beauty in the room by roomsize to allow us to get an average beauty per tile.</td></tr><tr><th><a href="area.html#proc/use_power">use_power</a></th><td>Add a power value amount to the stored used_x variables</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/active_alarms"><aside class="declaration">var </aside>active_alarms <aside>â€“ /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L38"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 38"></a></h3><p>Alarm type to count of sources. Not usable for ^ because we handle fires differently</p><h3 id="var/airalarms"><aside class="declaration">var </aside>airalarms <aside>â€“ /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L36"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 36"></a></h3><p>A list of all air alarms in this area</p><h3 id="var/airlock_wires"><aside class="declaration">var </aside>airlock_wires <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L100"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 100"></a></h3><p>Wire assignment for airlocks in this area</p><h3 id="var/always_unpowered"><aside class="declaration">var </aside>always_unpowered <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L64"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 64"></a></h3><p>This gets overridden to 1 for space in area/.</p><h3 id="var/ambient_buzz"><aside class="declaration">var </aside>ambient_buzz <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L82"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 82"></a></h3><p>The background droning loop that plays 24/7</p><h3 id="var/ambient_buzz_vol"><aside class="declaration">var </aside>ambient_buzz_vol <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L84"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 84"></a></h3><p>The volume of the ambient buzz</p><h3 id="var/ambientsounds"><aside class="declaration">var </aside>ambientsounds <aside>â€“ /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L78"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 78"></a></h3><p>A list of sounds to pick from every so often to play to clients.</p><h3 id="var/area_has_base_lighting"><aside class="declaration">var </aside>area_has_base_lighting <aside>â€“ /tmp</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/lighting/lighting_area.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_area.dm 7"></a></h3><p>Whether this area has a currently active base lighting, bool</p><h3 id="var/area_lighting"><aside class="declaration">var </aside>area_lighting <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/lighting/lighting_area.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_area.dm 9"></a></h3><p>What type of lighting this area uses</p><h3 id="var/area_limited_icon_smoothing"><aside class="declaration">var </aside>area_limited_icon_smoothing <aside>â€“ /<a href="area.html">area</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L95"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 95"></a></h3><p>Typepath to limit the areas (subtypes included) that atoms in this area can smooth with. Used for shuttles.</p><h3 id="var/areasize"><aside class="declaration">var </aside>areasize <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L59"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 59"></a></h3><p>Size of the area in open turfs, only calculated for indoors areas.</p><h3 id="var/base_lighting_alpha"><aside class="declaration">var </aside>base_lighting_alpha <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/lighting/lighting_area.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_area.dm 13"></a></h3><p>alpha 1-255 of lighting_effect and thus baselighting intensity. If you want this to be zero, use AREA_LIGHTING_NONE instead!</p><h3 id="var/base_lighting_color"><aside class="declaration">var </aside>base_lighting_color <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/lighting/lighting_area.dm#L15"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_area.dm 15"></a></h3><p>The colour of the light acting on this area</p><h3 id="var/beauty"><aside class="declaration">var </aside>beauty <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L48"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 48"></a></h3><p>Beauty average per open turf in the area</p><h3 id="var/beauty_threshold"><aside class="declaration">var </aside>beauty_threshold <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L50"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 50"></a></h3><p>If a room is too big it doesn't have beauty.</p><h3 id="var/contained_turfs"><aside class="declaration">var </aside>contained_turfs <aside>â€“ /list/<a href="turf.html">turf</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L19"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 19"></a></h3><p>List of all turfs currently inside this area. Acts as a filtered bersion of area.contents
For faster lookup (area.contents is actually a filtered loop over world)
Semi fragile, but it prevents stupid so I think it's worth it</p><h3 id="var/fire_detect"><aside class="declaration">var </aside>fire_detect <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L30"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 30"></a></h3><p>A var for whether the area allows for detecting fires/etc. Disabled or enabled at a fire alarm.</p><h3 id="var/firealarms"><aside class="declaration">var </aside>firealarms <aside>â€“ /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L34"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 34"></a></h3><p>A list of all fire alarms in this area OR ADJACENT TO IT</p><h3 id="var/firedoors"><aside class="declaration">var </aside>firedoors <aside>â€“ /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L32"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 32"></a></h3><p>A list of all fire locks in this area and on the border of this area.</p><h3 id="var/flavor_text_key"><aside class="declaration">var </aside>flavor_text_key <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L116"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 116"></a></h3><p>Cache key. Set in init.</p><h3 id="var/flavor_texts"><aside class="declaration">var </aside>flavor_texts <aside>â€“ /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L114"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 114"></a></h3><p>A weighted list of flavor texts for display_flavor().</p><h3 id="var/forced_ambience"><aside class="declaration">var </aside>forced_ambience <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L80"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 80"></a></h3><p>Does this area immediately play an ambience track upon enter?</p><h3 id="var/lighting_effect"><aside class="declaration">var </aside>lighting_effect <aside>â€“ /mutable_appearance</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/lighting/lighting_area.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_area.dm 5"></a></h3><p>The mutable appearance we underlay to show light</p><h3 id="var/lights"><aside class="declaration">var </aside>lights <aside>â€“ /list/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/light.html">light</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L40"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 40"></a></h3><p>All the lights in this area</p><h3 id="var/map_generator"><aside class="declaration">var </aside>map_generator <aside>â€“ /<a href="datum.html">datum</a>/<a href="datum/map_generator.html">map_generator</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L103"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 103"></a></h3><p>This datum, if set, allows terrain generation behavior to be ran on Initialize()</p><h3 id="var/max_ambience_cooldown"><aside class="declaration">var </aside>max_ambience_cooldown <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L88"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 88"></a></h3><p>Used to decide what the maximum time between ambience is</p><h3 id="var/min_ambience_cooldown"><aside class="declaration">var </aside>min_ambience_cooldown <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L86"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 86"></a></h3><p>Used to decide what the minimum time between ambience is</p><h3 id="var/outdoors"><aside class="declaration">var </aside>outdoors <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L56"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 56"></a></h3><p>For space, the asteroid, etc. Used with blueprints or with weather to determine if we are adding a new area (vs editing a station room)</p><h3 id="var/requires_power"><aside class="declaration">var </aside>requires_power <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L62"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 62"></a></h3><p>Will objects this area be needing power?</p><h3 id="var/sound_environment"><aside class="declaration">var </aside>sound_environment <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L106"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 106"></a></h3><p>Used to decide what kind of reverb the area makes sound have</p><h3 id="var/spook_level"><aside class="declaration">var </aside>spook_level <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L53"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 53"></a></h3><p>Used by ghosts to grant new powers. See /datum/component/spook_factor</p><h3 id="var/totalbeauty"><aside class="declaration">var </aside>totalbeauty <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L46"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 46"></a></h3><p>All beauty in this area combined, only includes indoor area.</p><h3 id="var/turfs_to_uncontain"><aside class="declaration">var </aside>turfs_to_uncontain <aside>â€“ /list/<a href="turf.html">turf</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L23"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 23"></a></h3><p>Contained turfs is a MASSIVE list, so rather then adding/removing from it each time we have a problem turf
We should instead store a list of turfs to REMOVE from it, then hook into a getter for it
There is a risk of this and contained_turfs leaking, so a subsystem will run it down to 0 incrementally if it gets too large</p><h2 id="proc">Proc Details</h2><h3 id="proc/AllowDrop"><aside class="parent"><a title="/atom" href="atom.html#proc/AllowDrop">â†‘</a></aside>AllowDrop<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L484"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 484"></a></aside></h3><p>Causes a runtime error</p><h3 id="proc/Destroy"><aside class="parent"><a title="/atom" href="atom.html#proc/Destroy">â†‘</a></aside>Destroy<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L270"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 270"></a></aside></h3><p>Destroy an area and clean it up</p>
<p>Removes the area from GLOB.areas_by_type and also stops it processing on SSobj</p>
<p>This is despite the fact that no code appears to put it on SSobj, but
who am I to argue with old coders</p><h3 id="proc/Entered"><aside class="parent"><a title="/atom" href="atom.html#proc/Entered">â†‘</a></aside>Entered<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/arrived, /<a href="area.html">area</a>/old_area)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L404"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 404"></a></aside></h3><p>Call back when an atom enters an area</p>
<p>Sends signals COMSIG_AREA_ENTERED and COMSIG_ENTER_AREA (to a list of atoms)</p>
<p>If the area has ambience, then it plays some ambience music to the ambience channel</p><h3 id="proc/Exited"><aside class="parent"><a title="/atom" href="atom.html#proc/Exited">â†‘</a></aside>Exited<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/gone, direction)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L435"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 435"></a></aside></h3><p>Called when an atom exits an area</p>
<p>Sends signals COMSIG_AREA_EXITED and COMSIG_EXIT_AREA (to a list of atoms)</p><h3 id="proc/LateInitialize"><aside class="parent"><a title="/atom" href="atom.html#proc/LateInitialize">â†‘</a></aside>LateInitialize<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L207"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 207"></a></aside></h3><p>Sets machine power levels in the area</p><h3 id="proc/New"><aside class="parent"><a title="/atom" href="atom.html#proc/New">â†‘</a></aside>New<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L151"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 151"></a></aside></h3><p>Called when an area loads</p>
<p>Adds the item to the GLOB.areas_by_type list based on area type</p><h3 id="proc/PlaceOnTopReact"><aside class="declaration">proc </aside>PlaceOnTopReact<aside>(/list/new_baseturfs, /<a href="turf.html">turf</a>/fake_turf_type, flags)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L494"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 494"></a></aside></h3><p>A hook so areas can modify the incoming args (of what??)</p><h3 id="proc/addStaticPower"><aside class="declaration">proc </aside>addStaticPower<aside>(value, powerchannel)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L360"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 360"></a></aside></h3><p>Add a static amount of power load to an area</p>
<p>Possible channels
*AREA_USAGE_STATIC_EQUIP
*AREA_USAGE_STATIC_LIGHT
*AREA_USAGE_STATIC_ENVIRON</p><h3 id="proc/adjust_spook_level"><aside class="declaration">proc </aside>adjust_spook_level<aside>(adj)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L528"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 528"></a></aside></h3><p>Adjusts the spook level and sends out a signal</p><h3 id="proc/burglaralert"><aside class="declaration">proc </aside>burglaralert<aside>(/<a href="obj.html">obj</a>/trigger)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L297"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 297"></a></aside></h3><p>Raise a burglar alert for this area</p>
<p>Close and locks all doors in the area and alerts silicon mobs of a break in</p>
<p>Alarm auto resets after 600 ticks</p><h3 id="proc/cannonize_contained_turfs"><aside class="declaration">proc </aside>cannonize_contained_turfs<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L232"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 232"></a></aside></h3><p>Ensures that the contained_turfs list properly represents the turfs actually inside us</p><h3 id="proc/clear_usage"><aside class="declaration">proc </aside>clear_usage<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L383"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 383"></a></aside></h3><p>Clear all non-static power usage in area</p>
<p>Clears all power used for the dynamic equipment, light and environment channels</p><h3 id="proc/close_and_lock_door"><aside class="declaration">proc </aside>close_and_lock_door<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/door.html">door</a>/DOOR)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L284"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 284"></a></aside></h3><p>Close and lock a door passed into this proc</p>
<p>Does this need to exist on area? probably not</p><h3 id="proc/communicate_fire_alert"><aside class="declaration">proc </aside>communicate_fire_alert<aside>(code)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L508"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 508"></a></aside></h3><p>Called by airalarms and firealarms to communicate the status of the area to relevant machines</p><h3 id="proc/create_area_lighting_objects"><aside class="declaration">proc </aside>create_area_lighting_objects<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/lighting/lighting_area.dm#L95"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_area.dm 95"></a></aside></h3><p>regenerates lighting objects for turfs in this area, primary use is VV changes</p><h3 id="proc/drop_location"><aside class="parent"><a title="/atom" href="atom.html#proc/drop_location">â†‘</a></aside>drop_location<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L490"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 490"></a></aside></h3><p>Causes a runtime error</p><h3 id="proc/get_flavor_string"><aside class="declaration">proc </aside>get_flavor_string<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L534"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 534"></a></aside></h3><p>Returns a string to display</p><h3 id="proc/has_contained_turfs"><aside class="declaration">proc </aside>has_contained_turfs<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L242"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 242"></a></aside></h3><p>Returns TRUE if we have contained turfs, FALSE otherwise</p><h3 id="proc/on_joining_game"><aside class="declaration">proc </aside>on_joining_game<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/boarder)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L499"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 499"></a></aside></h3><p>Called when a living mob that spawned here, joining the round, receives the player client.</p><h3 id="proc/play_ambience"><aside class="declaration">proc </aside>play_ambience<aside>(/<a href="mob.html">mob</a>/M, /sound/override_sound, volume)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/controllers/subsystem/ambience.dm#L62"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/ambience.dm 62"></a></aside></h3><p>Attempts to play an ambient sound to a mob, returning the cooldown in deciseconds</p><h3 id="proc/power_change"><aside class="declaration">proc </aside>power_change<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L347"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 347"></a></aside></h3><p>Called when the area power status changes</p>
<p>Updates the area icon, calls power change on all machinees in the area, and sends the <code>COMSIG_AREA_POWER_CHANGE</code> signal.</p><h3 id="proc/powered"><aside class="declaration">proc </aside>powered<aside>(chan)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L320"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 320"></a></aside></h3><p>Returns int 1 or 0 if the area has power for the given channel</p>
<p>evalutes a mixture of variables mappers can set, requires_power, always_unpowered and then
per channel power_equip, power_light, power_environ</p><h3 id="proc/reg_in_areas_in_z"><aside class="declaration">proc </aside>reg_in_areas_in_z<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L250"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 250"></a></aside></h3><p>Register this area as belonging to a z level</p>
<p>Ensures the item is added to the SSmapping.areas_in_z list for this z</p><h3 id="proc/removeStaticPower"><aside class="declaration">proc </aside>removeStaticPower<aside>(value, powerchannel)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L373"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 373"></a></aside></h3><p>Remove a static amount of power load to an area</p>
<p>Possible channels
*AREA_USAGE_STATIC_EQUIP
*AREA_USAGE_STATIC_LIGHT
*AREA_USAGE_STATIC_ENVIRON</p><h3 id="proc/remove_area_lighting_objects"><aside class="declaration">proc </aside>remove_area_lighting_objects<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/lighting/lighting_area.dm#L103"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_area.dm 103"></a></aside></h3><p>Removes lighting objects from turfs in this area if we have them, primary use is VV changes</p><h3 id="proc/setup"><aside class="declaration">proc </aside>setup<aside>(a_name)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L459"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 459"></a></aside></h3><p>Setup an area (with the given name)</p>
<p>Sets the area name, sets all status var's to false and adds the area to the sorted area list</p><h3 id="proc/update_areasize"><aside class="declaration">proc </aside>update_areasize<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L474"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 474"></a></aside></h3><p>Set the area size of the area</p>
<p>This is the number of open turfs in the area contents, or FALSE if the outdoors var is set</p><h3 id="proc/update_beauty"><aside class="declaration">proc </aside>update_beauty<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L445"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 445"></a></aside></h3><p>Divides total beauty in the room by roomsize to allow us to get an average beauty per tile.</p><h3 id="proc/use_power"><aside class="declaration">proc </aside>use_power<aside>(amount, chan)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/game/area/areas.dm#L392"><img src="git.png" width="16" height="16" title="code/game/area/areas.dm 392"></a></aside></h3><p>Add a power value amount to the stored used_x variables</p></main><footer>daedalus.dme <a href="https://github.com/DaedalusDock/daedalusdock/tree/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608">5ab5b0f</a> (master) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>