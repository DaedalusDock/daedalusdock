<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/action/cooldown - Daedalus Dock</title></head><body><header><a href="index.html">Daedalus Dock</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> â€” <a href="datum/action/cooldown.html#var">Var Details</a> - <a href="datum/action/cooldown.html#proc">Proc Details</a></header><main><h1>cooldown <aside>/<a href="datum.html">datum</a>/<a href="datum/action.html">action</a>/<a href="datum/action/cooldown.html">cooldown</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L2"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 2"></a></h1><p>Preset for an action that has a cooldown.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/action/cooldown.html#var/active_background_icon_state">active_background_icon_state</a></th><td>The icon state the background uses when active</td></tr><tr><th><a href="datum/action/cooldown.html#var/active_icon_state">active_icon_state</a></th><td>The active icon state of the spell's button icon, used for editing the icon &quot;on&quot;</td></tr><tr><th><a href="datum/action/cooldown.html#var/active_overlay_icon_state">active_overlay_icon_state</a></th><td>The active icon_state of the overlay we apply</td></tr><tr><th><a href="datum/action/cooldown.html#var/base_background_icon_state">base_background_icon_state</a></th><td>The base icon_state of this action's background</td></tr><tr><th><a href="datum/action/cooldown.html#var/base_icon_state">base_icon_state</a></th><td>The base icon state of the spell's button icon, used for editing the icon &quot;off&quot;</td></tr><tr><th><a href="datum/action/cooldown.html#var/base_overlay_icon_state">base_overlay_icon_state</a></th><td>The base icon_state of the overlay we apply</td></tr><tr><th><a href="datum/action/cooldown.html#var/click_cd_override">click_cd_override</a></th><td>The cooldown added onto the user's next click.</td></tr><tr><th><a href="datum/action/cooldown.html#var/click_to_activate">click_to_activate</a></th><td>Setting for intercepting clicks before activating the ability</td></tr><tr><th><a href="datum/action/cooldown.html#var/cooldown_time">cooldown_time</a></th><td>The default cooldown applied when StartCooldown() is called</td></tr><tr><th><a href="datum/action/cooldown.html#var/initialized_actions">initialized_actions</a></th><td>List of prerequisite actions that have been initialized</td></tr><tr><th><a href="datum/action/cooldown.html#var/melee_cooldown_time">melee_cooldown_time</a></th><td>The default melee cooldown applied after the ability ends</td></tr><tr><th><a href="datum/action/cooldown.html#var/next_melee_use_time">next_melee_use_time</a></th><td>The actual next time the owner of this action can melee</td></tr><tr><th><a href="datum/action/cooldown.html#var/next_use_time">next_use_time</a></th><td>The actual next time this ability can be used</td></tr><tr><th><a href="datum/action/cooldown.html#var/panel">panel</a></th><td>The stat panel this action shows up in the stat panel in. If null, will not show up.</td></tr><tr><th><a href="datum/action/cooldown.html#var/ranged_mousepointer">ranged_mousepointer</a></th><td>What icon to replace our mouse cursor with when active. Optional</td></tr><tr><th><a href="datum/action/cooldown.html#var/sequence_actions">sequence_actions</a></th><td>List of prerequisite actions that are used in this sequenced ability, you cannot put other sequenced abilities in this</td></tr><tr><th><a href="datum/action/cooldown.html#var/shared_cooldown">shared_cooldown</a></th><td>Shares cooldowns with other abiliies, bitflag</td></tr><tr><th><a href="datum/action/cooldown.html#var/text_cooldown">text_cooldown</a></th><td>Whether or not you want the cooldown for the ability to display in text form</td></tr><tr><th><a href="datum/action/cooldown.html#var/unset_after_click">unset_after_click</a></th><td>If TRUE, we will unset after using our click intercept.</td></tr><tr><th><a href="datum/action/cooldown.html#var/write_log">write_log</a></th><td>If TRUE, will log action usage to the owner's action log.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/action/cooldown.html#proc/Activate">Activate</a></th><td>To be implemented by subtypes (if not generic)</td></tr><tr><th><a href="datum/action/cooldown.html#proc/InterceptClickOn">InterceptClickOn</a></th><td>Intercepts client owner clicks to activate the ability</td></tr><tr><th><a href="datum/action/cooldown.html#proc/PreActivate">PreActivate</a></th><td>For signal calling</td></tr><tr><th><a href="datum/action/cooldown.html#proc/StartCooldown">StartCooldown</a></th><td>Starts a cooldown time to be shared with similar abilities
Will use default cooldown time if an override is not specified</td></tr><tr><th><a href="datum/action/cooldown.html#proc/StartCooldownOthers">StartCooldownOthers</a></th><td>Starts a cooldown time for other abilities that share a cooldown with this. Has some niche usage with more complicated attack ai!
Will use default cooldown time if an override is not specified</td></tr><tr><th><a href="datum/action/cooldown.html#proc/StartCooldownSelf">StartCooldownSelf</a></th><td>Starts a cooldown time for this ability only
Will use default cooldown time if an override is not specified</td></tr><tr><th><a href="datum/action/cooldown.html#proc/create_sequence_actions">create_sequence_actions</a></th><td>Initializes any sequence actions</td></tr><tr><th><a href="datum/action/cooldown.html#proc/handle_melee_attack">handle_melee_attack</a></th><td>Cancels melee attacks if they are on cooldown.</td></tr><tr><th><a href="datum/action/cooldown.html#proc/is_valid_target">is_valid_target</a></th><td>Check if the target we're casting on is a valid target.
For no-target (self cast) actions, the target being checked (cast_on) is the caster.
For click_to_activate actions, the target being checked is the clicked atom.</td></tr><tr><th><a href="datum/action/cooldown.html#proc/set_click_ability">set_click_ability</a></th><td>Set our action as the click override on the passed mob.</td></tr><tr><th><a href="datum/action/cooldown.html#proc/set_statpanel_format">set_statpanel_format</a></th><td>Formats the action to be returned to the stat panel.</td></tr><tr><th><a href="datum/action/cooldown.html#proc/unset_click_ability">unset_click_ability</a></th><td>Unset our action as the click override of the passed mob.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/active_background_icon_state"><aside class="declaration">var </aside>active_background_icon_state <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L40"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 40"></a></h3><p>The icon state the background uses when active</p><h3 id="var/active_icon_state"><aside class="declaration">var </aside>active_icon_state <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L48"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 48"></a></h3><p>The active icon state of the spell's button icon, used for editing the icon &quot;on&quot;</p><h3 id="var/active_overlay_icon_state"><aside class="declaration">var </aside>active_overlay_icon_state <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L44"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 44"></a></h3><p>The active icon_state of the overlay we apply</p><h3 id="var/base_background_icon_state"><aside class="declaration">var </aside>base_background_icon_state <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L38"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 38"></a></h3><p>The base icon_state of this action's background</p><h3 id="var/base_icon_state"><aside class="declaration">var </aside>base_icon_state <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L46"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 46"></a></h3><p>The base icon state of the spell's button icon, used for editing the icon &quot;off&quot;</p><h3 id="var/base_overlay_icon_state"><aside class="declaration">var </aside>base_overlay_icon_state <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L42"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 42"></a></h3><p>The base icon_state of the overlay we apply</p><h3 id="var/click_cd_override"><aside class="declaration">var </aside>click_cd_override <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L32"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 32"></a></h3><p>The cooldown added onto the user's next click.</p><h3 id="var/click_to_activate"><aside class="declaration">var </aside>click_to_activate <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L30"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 30"></a></h3><p>Setting for intercepting clicks before activating the ability</p><h3 id="var/cooldown_time"><aside class="declaration">var </aside>cooldown_time <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L14"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 14"></a></h3><p>The default cooldown applied when StartCooldown() is called</p><h3 id="var/initialized_actions"><aside class="declaration">var </aside>initialized_actions <aside>â€“ /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L26"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 26"></a></h3><p>List of prerequisite actions that have been initialized</p><h3 id="var/melee_cooldown_time"><aside class="declaration">var </aside>melee_cooldown_time <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L16"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 16"></a></h3><p>The default melee cooldown applied after the ability ends</p><h3 id="var/next_melee_use_time"><aside class="declaration">var </aside>next_melee_use_time <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 18"></a></h3><p>The actual next time the owner of this action can melee</p><h3 id="var/next_use_time"><aside class="declaration">var </aside>next_use_time <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L10"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 10"></a></h3><p>The actual next time this ability can be used</p><h3 id="var/panel"><aside class="declaration">var </aside>panel <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L12"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 12"></a></h3><p>The stat panel this action shows up in the stat panel in. If null, will not show up.</p><h3 id="var/ranged_mousepointer"><aside class="declaration">var </aside>ranged_mousepointer <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L36"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 36"></a></h3><p>What icon to replace our mouse cursor with when active. Optional</p><h3 id="var/sequence_actions"><aside class="declaration">var </aside>sequence_actions <aside>â€“ /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 24"></a></h3><p>List of prerequisite actions that are used in this sequenced ability, you cannot put other sequenced abilities in this</p><h3 id="var/shared_cooldown"><aside class="declaration">var </aside>shared_cooldown <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 22"></a></h3><p>Shares cooldowns with other abiliies, bitflag</p><h3 id="var/text_cooldown"><aside class="declaration">var </aside>text_cooldown <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 20"></a></h3><p>Whether or not you want the cooldown for the ability to display in text form</p><h3 id="var/unset_after_click"><aside class="declaration">var </aside>unset_after_click <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L34"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 34"></a></h3><p>If TRUE, we will unset after using our click intercept.</p><h3 id="var/write_log"><aside class="declaration">var </aside>write_log <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L7"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 7"></a></h3><p>If TRUE, will log action usage to the owner's action log.</p><h2 id="proc">Proc Details</h2><h3 id="proc/Activate"><aside class="declaration">proc </aside>Activate<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L265"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 265"></a></aside></h3><p>To be implemented by subtypes (if not generic)</p><h3 id="proc/InterceptClickOn"><aside class="declaration">proc </aside>InterceptClickOn<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/invoker, params, /<a href="atom.html">atom</a>/target)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L222"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 222"></a></aside></h3><p>Intercepts client owner clicks to activate the ability</p><h3 id="proc/PreActivate"><aside class="declaration">proc </aside>PreActivate<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L246"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 246"></a></aside></h3><p>For signal calling</p><h3 id="proc/StartCooldown"><aside class="declaration">proc </aside>StartCooldown<aside>(override_cooldown_time, override_melee_cooldown_time)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L153"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 153"></a></aside></h3><p>Starts a cooldown time to be shared with similar abilities
Will use default cooldown time if an override is not specified</p><h3 id="proc/StartCooldownOthers"><aside class="declaration">proc </aside>StartCooldownOthers<aside>(override_cooldown_time)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L178"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 178"></a></aside></h3><p>Starts a cooldown time for other abilities that share a cooldown with this. Has some niche usage with more complicated attack ai!
Will use default cooldown time if an override is not specified</p><h3 id="proc/StartCooldownSelf"><aside class="declaration">proc </aside>StartCooldownSelf<aside>(override_cooldown_time)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L168"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 168"></a></aside></h3><p>Starts a cooldown time for this ability only
Will use default cooldown time if an override is not specified</p><h3 id="proc/create_sequence_actions"><aside class="declaration">proc </aside>create_sequence_actions<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L138"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 138"></a></aside></h3><p>Initializes any sequence actions</p><h3 id="proc/handle_melee_attack"><aside class="declaration">proc </aside>handle_melee_attack<aside>(/<a href="mob.html">mob</a>/source, /<a href="mob.html">mob</a>/target)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L276"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 276"></a></aside></h3><p>Cancels melee attacks if they are on cooldown.</p><h3 id="proc/is_valid_target"><aside class="declaration">proc </aside>is_valid_target<aside>(/<a href="atom.html">atom</a>/cast_on)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L361"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 361"></a></aside></h3><p>Check if the target we're casting on is a valid target.
For no-target (self cast) actions, the target being checked (cast_on) is the caster.
For click_to_activate actions, the target being checked is the clicked atom.</p>
<p>Return TRUE if cast_on is valid, FALSE otherwise</p><h3 id="proc/set_click_ability"><aside class="declaration">proc </aside>set_click_ability<aside>(/<a href="mob.html">mob</a>/on_who)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L292"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 292"></a></aside></h3><p>Set our action as the click override on the passed mob.</p><h3 id="proc/set_statpanel_format"><aside class="declaration">proc </aside>set_statpanel_format<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L319"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 319"></a></aside></h3><p>Formats the action to be returned to the stat panel.</p><h3 id="proc/unset_click_ability"><aside class="declaration">proc </aside>unset_click_ability<aside>(/<a href="mob.html">mob</a>/on_who, refund_cooldown)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/datums/actions/cooldown_action.dm#L308"><img src="git.png" width="16" height="16" title="code/datums/actions/cooldown_action.dm 308"></a></aside></h3><p>Unset our action as the click override of the passed mob.</p>
<p>if refund_cooldown is TRUE, we are being unset by the user clicking the action off
if refund_cooldown is FALSE, we are being forcefully unset, likely by someone actually using the action</p></main><footer>daedalus.dme <a href="https://github.com/DaedalusDock/daedalusdock/tree/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608">5ab5b0f</a> (master) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>