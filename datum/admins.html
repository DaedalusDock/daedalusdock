<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/admins - Daedalus Dock</title></head><body><header><a href="index.html">Daedalus Dock</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/admins.html#var">Var Details</a> - <a href="datum/admins.html#proc">Proc Details</a></header><main><h1>admins <aside>/<a href="datum.html">datum</a>/<a href="datum/admins.html">admins</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/holder2.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 12"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/admins.html#var/blocked_by_2fa">blocked_by_2fa</a></th><td>Whether or not the user tried to connect, but was blocked by 2FA</td></tr><tr><th><a href="datum/admins.html#var/bypass_2fa">bypass_2fa</a></th><td>Whether or not this user can bypass 2FA</td></tr><tr><th><a href="datum/admins.html#var/tagged_datums">tagged_datums</a></th><td>A lazylist of tagged datums, for quick reference with the View Tags verb</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/admins.html#proc/Game">Game</a></th><td>Panels</td></tr><tr><th><a href="datum/admins.html#proc/add_tagged_datum">add_tagged_datum</a></th><td>Inserts the target_datum into <a href="datum/admins.html#var/tagged_datums" title="/datum/admins">/datum/admins/var/tagged_datums</a>, for later reference.</td></tr><tr><th><a href="datum/admins.html#proc/can_place_additional_admin_ban">can_place_additional_admin_ban</a></th><td>Checks if the admin can place an additional admin ban.</td></tr><tr><th><a href="datum/admins.html#proc/check_2fa">check_2fa</a></th><td>Returns whether or not the given client has a verified 2FA connection.
The output is in the form of a list with the first index being whether or not the
check was successful, the 2nd is the ID of the associated database entry
if its a false result and if one can be found.</td></tr><tr><th><a href="datum/admins.html#proc/display_tags">display_tags</a></th><td>Display all of the tagged datums</td></tr><tr><th><a href="datum/admins.html#proc/handle_tagged_del">handle_tagged_del</a></th><td>Get ahead of the curve with deleting</td></tr><tr><th><a href="datum/admins.html#proc/modify_traits">modify_traits</a></th><td>Allow admin to add or remove traits of datum</td></tr><tr><th><a href="datum/admins.html#proc/notify_all_banned_players">notify_all_banned_players</a></th><td>Notifies all banned players about their ban and gives them a link to appeal from the config. If it was a server ban, it also kicks them.</td></tr><tr><th><a href="datum/admins.html#proc/poll_list_panel">poll_list_panel</a></th><td>Shows a list of all current and future polls and buttons to edit or delete them or create a new poll.</td></tr><tr><th><a href="datum/admins.html#proc/poll_management_panel">poll_management_panel</a></th><td>Show the options for creating a poll or editing its parameters along with its linked options.</td></tr><tr><th><a href="datum/admins.html#proc/poll_option_panel">poll_option_panel</a></th><td>Show the options for creating a poll option or editing its parameters.</td></tr><tr><th><a href="datum/admins.html#proc/poll_option_parse_href">poll_option_parse_href</a></th><td>Processes topic data from poll option panel.</td></tr><tr><th><a href="datum/admins.html#proc/poll_parse_href">poll_parse_href</a></th><td>Processes topic data from poll management panel.</td></tr><tr><th><a href="datum/admins.html#proc/reban">reban</a></th><td>Sometimes an admin did not intend to unban a player. This proc undoes an unbanning operation by setting the unbanned_ keys in the DB back to null.</td></tr><tr><th><a href="datum/admins.html#proc/remove_tagged_datum">remove_tagged_datum</a></th><td>Attempts to remove the specified datum from <a href="datum/admins.html#var/tagged_datums" title="/datum/admins">/datum/admins/var/tagged_datums</a> if it exists</td></tr><tr><th><a href="datum/admins.html#proc/spawn_atom">spawn_atom</a></th><td>ADMIN HELPER PROCS</td></tr><tr><th><a href="datum/admins.html#proc/station_traits_panel">station_traits_panel</a></th><td>Opens the station traits admin panel</td></tr><tr><th><a href="datum/admins.html#proc/view_all_circuits">view_all_circuits</a></th><td>An admin verb to view all circuits, plus useful information</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/blocked_by_2fa"><aside class="declaration">var </aside>blocked_by_2fa <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/holder2.dm#L39"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 39"></a></h3><p>Whether or not the user tried to connect, but was blocked by 2FA</p><h3 id="var/bypass_2fa"><aside class="declaration">var </aside>bypass_2fa <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/holder2.dm#L42"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 42"></a></h3><p>Whether or not this user can bypass 2FA</p><h3 id="var/tagged_datums"><aside class="declaration">var </aside>tagged_datums <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/holder2.dm#L45"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 45"></a></h3><p>A lazylist of tagged datums, for quick reference with the View Tags verb</p><h2 id="proc">Proc Details</h2><h3 id="proc/Game"><aside class="declaration">proc </aside>Game<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/admin.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/admin/admin.dm 18"></a></aside></h3><p>Panels</p><h3 id="proc/add_tagged_datum"><aside class="declaration">proc </aside>add_tagged_datum<aside>(/<a href="datum.html">datum</a>/target_datum)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/tag.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/admin/tag.dm 7"></a></aside></h3><p>Inserts the target_datum into <a href="datum/admins.html#var/tagged_datums" title="/datum/admins">/datum/admins/var/tagged_datums</a>, for later reference.</p>
<p>Arguments:</p>
<ul>
<li>target_datum - The datum you want to create a tag for</li>
</ul><h3 id="proc/can_place_additional_admin_ban"><aside class="declaration">proc </aside>can_place_additional_admin_ban<aside>(admin_ckey)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/sql_ban_system.dm#L998"><img src="git.png" width="16" height="16" title="code/modules/admin/sql_ban_system.dm 998"></a></aside></h3><p>Checks if the admin can place an additional admin ban.</p>
<p>Returns FALSE if the query fails to execute.
Returns FALSE and notifies the admin in chat if they are at their max number of admin bans already.
Returns TRUE if an admin can place an additional admin ban.</p>
<p>Arguments:</p>
<ul>
<li>admin_ckey - The ckey of the admin who is trying to place an admin ban.</li>
</ul><h3 id="proc/check_2fa"><aside class="declaration">proc </aside>check_2fa<aside>(/<a href="client.html">client</a>/client)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/holder2.dm#L194"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 194"></a></aside></h3><p>Returns whether or not the given client has a verified 2FA connection.
The output is in the form of a list with the first index being whether or not the
check was successful, the 2nd is the ID of the associated database entry
if its a false result and if one can be found.</p><h3 id="proc/display_tags"><aside class="declaration">proc </aside>display_tags<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/tag.dm#L54"><img src="git.png" width="16" height="16" title="code/modules/admin/tag.dm 54"></a></aside></h3><p>Display all of the tagged datums</p><h3 id="proc/handle_tagged_del"><aside class="declaration">proc </aside>handle_tagged_del<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/tag.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/admin/tag.dm 17"></a></aside></h3><p>Get ahead of the curve with deleting</p><h3 id="proc/modify_traits"><aside class="declaration">proc </aside>modify_traits<aside>(/<a href="datum.html">datum</a>/D)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/verbs/admin.dm#L121"><img src="git.png" width="16" height="16" title="code/modules/admin/verbs/admin.dm 121"></a></aside></h3><p>Allow admin to add or remove traits of datum</p><h3 id="proc/notify_all_banned_players"><aside class="declaration">proc </aside>notify_all_banned_players<aside>(banned_player_ckey, banned_player_ip, banned_player_cid, banned_player_message, banned_other_message, kick_banned_players, applies_to_admins)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/sql_ban_system.dm#L1040"><img src="git.png" width="16" height="16" title="code/modules/admin/sql_ban_system.dm 1040"></a></aside></h3><p>Notifies all banned players about their ban and gives them a link to appeal from the config. If it was a server ban, it also kicks them.</p>
<p>If the banned player's ckey has a linked client on the server, it notifies them of the ban details and kicks them if it was a server ban.
If there is anyone else sharing the banned player's IP or CID, it notifies them of the ban details and kicks them if it was a server ban.</p>
<p>Builds the ban cache for every client impacted by the ban.</p>
<p>Arguments:</p>
<ul>
<li>banned_player_ckey - The ckey of the banned player.</li>
<li>banned_player_ip - IP address of the banned player.</li>
<li>banned_player_cid - CID of the banned player.</li>
<li>banned_player_message - The message to show to only the specifically banned player.</li>
<li>banned_other_message - The message to show to any other players who share the banned player's IP or CID.</li>
<li>kick_banned_players - TRUE if we want to kick affected players, FALSE otherwise. This should generally only be TRUE for server bans.</li>
<li>applies_to_admins - TRUE if this ban applies to admins and we may need to kick them, FALSE otherwise.</li>
</ul><h3 id="proc/poll_list_panel"><aside class="declaration">proc </aside>poll_list_panel<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/poll_management.dm#L73"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 73"></a></aside></h3><p>Shows a list of all current and future polls and buttons to edit or delete them or create a new poll.</p><h3 id="proc/poll_management_panel"><aside class="declaration">proc </aside>poll_management_panel<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/poll_management.dm#L97"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 97"></a></aside></h3><p>Show the options for creating a poll or editing its parameters along with its linked options.</p><h3 id="proc/poll_option_panel"><aside class="declaration">proc </aside>poll_option_panel<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, /<a href="datum.html">datum</a>/<a href="datum/poll_option.html">poll_option</a>/option)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/poll_management.dm#L483"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 483"></a></aside></h3><p>Show the options for creating a poll option or editing its parameters.</p><h3 id="proc/poll_option_parse_href"><aside class="declaration">proc </aside>poll_option_parse_href<aside>(/list/href_list, /<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, /<a href="datum.html">datum</a>/<a href="datum/poll_option.html">poll_option</a>/option)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/poll_management.dm#L542"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 542"></a></aside></h3><p>Processes topic data from poll option panel.</p>
<p>Reads through returned form data and assigns data to the option datum, creating a new one if required, before passing it to be saved.
Also does some simple error checking to ensure the option will be valid before creation.</p><h3 id="proc/poll_parse_href"><aside class="declaration">proc </aside>poll_parse_href<aside>(/list/href_list, /<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/poll_management.dm#L244"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 244"></a></aside></h3><p>Processes topic data from poll management panel.</p>
<p>Reads through returned form data and assigns data to the poll datum, creating a new one if required, before passing it to be saved.
Also does some simple error checking to ensure the poll will be valid before creation.</p><h3 id="proc/reban"><aside class="declaration">proc </aside>reban<aside>(ban_id, applies_to_admins, player_key, player_ip, player_cid, role, page, admin_key)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/sql_ban_system.dm#L799"><img src="git.png" width="16" height="16" title="code/modules/admin/sql_ban_system.dm 799"></a></aside></h3><p>Sometimes an admin did not intend to unban a player. This proc undoes an unbanning operation by setting the unbanned_ keys in the DB back to null.</p><h3 id="proc/remove_tagged_datum"><aside class="declaration">proc </aside>remove_tagged_datum<aside>(/<a href="datum.html">datum</a>/target_datum, silent)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/tag.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/admin/tag.dm 31"></a></aside></h3><p>Attempts to remove the specified datum from <a href="datum/admins.html#var/tagged_datums" title="/datum/admins">/datum/admins/var/tagged_datums</a> if it exists</p>
<p>Arguments:</p>
<ul>
<li>target_datum - The datum you want to remove from the tagged_datums list</li>
<li>silent - If TRUE, won't print messages to the owner's chat</li>
</ul><h3 id="proc/spawn_atom"><aside class="declaration">proc </aside>spawn_atom<aside>(object<span class="as"> as </span>text)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/admin/admin.dm#L50"><img src="git.png" width="16" height="16" title="code/modules/admin/admin.dm 50"></a></aside></h3><p>ADMIN HELPER PROCS</p><h3 id="proc/station_traits_panel"><aside class="declaration">proc </aside>station_traits_panel<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/datums/station_traits/admin_panel.dm#L2"><img src="git.png" width="16" height="16" title="code/datums/station_traits/admin_panel.dm 2"></a></aside></h3><p>Opens the station traits admin panel</p><h3 id="proc/view_all_circuits"><aside class="declaration">proc </aside>view_all_circuits<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/wiremod/core/admin_panel.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/wiremod/core/admin_panel.dm 2"></a></aside></h3><p>An admin verb to view all circuits, plus useful information</p></main><footer>daedalus.dme <a href="https://github.com/DaedalusDock/daedalusdock/tree/a11ad7c401daeb2805315aa8820f21ea7c1bf233">a11ad7c</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>