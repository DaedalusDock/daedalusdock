<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/c4_file/terminal_program/operating_system/rtos - Daedalus Dock</title></head><body><header><a href="index.html">Daedalus Dock</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/c4_file/terminal_program/operating_system/rtos.html#var">Var Details</a> - <a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc">Proc Details</a></header><main><h1>rtos <aside>/<a href="datum.html">datum</a>/<a href="datum/c4_file.html">c4_file</a>/<a href="datum/c4_file/terminal_program.html">terminal_program</a>/<a href="datum/c4_file/terminal_program/operating_system.html">operating_system</a>/<a href="datum/c4_file/terminal_program/operating_system/rtos.html">rtos</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 17"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#var/display_icon">display_icon</a></th><td>Icon state for the containing controller's screen.</td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#var/display_indicators">display_indicators</a></th><td>Bitflag (RTOS_RED, RTOS_YELLOW, RTOS_GREEN) for indicator lights.</td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#var/print_history">print_history</a></th><td>List containing the last RTOS_OUTPUT_ROWS lines, FIFO queue.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/check_access">check_access</a></th><td></td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/check_id">check_id</a></th><td></td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/finish_startup">finish_startup</a></th><td>Program-specific startup code, Usually calls UI draw procs.</td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/halt">halt</a></th><td></td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/populate_memory">populate_memory</a></th><td>Load our variables from the configuration database. Return a string to halt.</td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/post_signal">post_signal</a></th><td></td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/redraw_screen">redraw_screen</a></th><td></td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/unlock_on_roundstart">unlock_on_roundstart</a></th><td>Called by the embedded controller itself on roundstart to unlock the controlled mechanism.</td></tr><tr><th><a href="datum/c4_file/terminal_program/operating_system/rtos.html#proc/update_visuals">update_visuals</a></th><td></td></tr></table><h2 id="var">Var Details</h2><h3 id="var/display_icon"><aside class="declaration">var </aside>display_icon <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 27"></a></h3><p>Icon state for the containing controller's screen.</p><h3 id="var/display_indicators"><aside class="declaration">var </aside>display_indicators <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L30"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 30"></a></h3><p>Bitflag (RTOS_RED, RTOS_YELLOW, RTOS_GREEN) for indicator lights.</p><h3 id="var/print_history"><aside class="declaration">var </aside>print_history <aside>– /tmp/list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L24"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 24"></a></h3><p>List containing the last RTOS_OUTPUT_ROWS lines, FIFO queue.</p><h2 id="proc">Proc Details</h2><h3 id="proc/check_access"><aside class="declaration">proc </aside>check_access<aside>(/list/access_list)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L130"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 130"></a></aside></h3><ul>
<li>RTOS.h - Check Access</li>
<li>Softcode allowed(), takes an ID access list from the ID peripheral.</li>
<li>Deadlocks if the Access DB is missing or invalid</li>
</ul><h3 id="proc/check_id"><aside class="declaration">proc </aside>check_id<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L180"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 180"></a></aside></h3><ul>
<li>RTOS.h - Check ID</li>
<li>Check if an inserted ID is allowed. Wraps rtos/check_access()</li>
<li>Deadlocks if there is no card reader.</li>
</ul><h3 id="proc/finish_startup"><aside class="declaration">proc </aside>finish_startup<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 49"></a></aside></h3><p>Program-specific startup code, Usually calls UI draw procs.</p><h3 id="proc/halt"><aside class="declaration">proc </aside>halt<aside>(error_code, error_message)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L91"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 91"></a></aside></h3><ul>
<li>RTOS.h - Halt</li>
<li>error_code - 4 number error code</li>
<li>error_message - 20-character free text error message</li>
<li>Sets <code>deadlocked</code>, consider this the RTOS equivalent of CRASH()</li>
</ul><h3 id="proc/populate_memory"><aside class="declaration">proc </aside>populate_memory<aside>(/<a href="datum.html">datum</a>/<a href="datum/c4_file.html">c4_file</a>/<a href="datum/c4_file/record.html">record</a>/conf_record)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 52"></a></aside></h3><p>Load our variables from the configuration database. Return a string to halt.</p><h3 id="proc/post_signal"><aside class="declaration">proc </aside>post_signal<aside>(/<a href="datum.html">datum</a>/<a href="datum/signal.html">signal</a>/sending_signal, filter)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L106"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 106"></a></aside></h3><ul>
<li>RTOS.h - Post Signal</li>
<li>Follows standard post_signal calling conventions.</li>
</ul><h3 id="proc/redraw_screen"><aside class="declaration">proc </aside>redraw_screen<aside>(update_ui)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L119"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 119"></a></aside></h3><ul>
<li>RTOS.h - Redraw Screen</li>
<li>Redraws the print_history buffers to the screen. Call after manual editing.</li>
</ul><h3 id="proc/unlock_on_roundstart"><aside class="declaration">proc </aside>unlock_on_roundstart<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L197"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 197"></a></aside></h3><p>Called by the embedded controller itself on roundstart to unlock the controlled mechanism.</p><h3 id="proc/update_visuals"><aside class="declaration">proc </aside>update_visuals<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/computer4/data/terminal/rtos/_rtos.dm#L161"><img src="git.png" width="16" height="16" title="code/modules/computer4/data/terminal/rtos/_rtos.dm 161"></a></aside></h3><ul>
<li>RTOS.h - Update Visuals</li>
<li>Updates the visual-related vars, and triggers an icon update for the parent machine. Otherwise, halts.</li>
</ul></main><footer>daedalus.dme <a href="https://github.com/DaedalusDock/daedalusdock/tree/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608">5ab5b0f</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>