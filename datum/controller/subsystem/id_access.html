<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/id_access - Daedalus Dock</title></head><body><header><a href="index.html">Daedalus Dock</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/id_access.html#var">Var Details</a> - <a href="datum/controller/subsystem/id_access.html#proc">Proc Details</a></header><main><h1>id_access <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/id_access.html">id_access</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L4"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 4"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/access_groups">access_groups</a></th><td>Dictionary of access groups. Keys are typepaths. Values are instances.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/centcom_job_templates">centcom_job_templates</a></th><td>Helper list containing all template paths that can be used as Centcom templates.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/desc_by_access">desc_by_access</a></th><td>Dictionary of access names. Keys are access levels. Values are their associated names.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/static_pincodes">static_pincodes</a></th><td>Database of referenceable pincodes (Usually door codes.)</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/station_groups">station_groups</a></th><td>Helper list containing all station groups.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/station_job_templates">station_job_templates</a></th><td>Helper list containing all template paths that can be used as job templates. Intended to be used alongside logic for ACCESS_CHANGE_IDS. Grab templates from sub_department_managers_tgui for Head of Staff restrictions.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/station_pda_templates">station_pda_templates</a></th><td>Helper list containing all PDA paths that can be painted by station machines. Intended to be used alongside logic for ACCESS_CHANGE_IDS. Grab templates from sub_department_managers_tgui for Head of Staff restrictions.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/sub_department_managers_tgui">sub_department_managers_tgui</a></th><td>List of accesses for the Heads of each sub-department alongside the regions they control and their job name.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/template_singletons_by_path">template_singletons_by_path</a></th><td>Dictionary of template singletons. Keys are paths. Values are their associated singletons.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#var/tgui_access_groups">tgui_access_groups</a></th><td>Specially formatted list for sending access levels to tgui interfaces.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/apply_template_access_to_card">apply_template_access_to_card</a></th><td>Adds the accesses associated with a template to an ID card.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/apply_template_to_card">apply_template_to_card</a></th><td>Applies a template singleton to a card.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/apply_template_to_chameleon_card">apply_template_to_chameleon_card</a></th><td></td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/get_access_desc">get_access_desc</a></th><td>Returns the access description associated with any given access level.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/get_access_for_group">get_access_for_group</a></th><td>Returns the list of all accesses associated with any given access group.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/get_static_pincode">get_static_pincode</a></th><td>Get a global pin code, generates it if it doesn't already exist.
Uses the passed length only if generating.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/refresh_job_template_singletons">refresh_job_template_singletons</a></th><td>Called by [/datum/controller/subsystem/ticker/proc/setup]</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/remove_template_from_card">remove_template_from_card</a></th><td>Removes a template from an ID card. Also removes all accesses from it too.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/remove_template_from_chameleon_card">remove_template_from_chameleon_card</a></th><td>Removes a template from a chameleon ID card.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/setup_access_descriptions">setup_access_descriptions</a></th><td>Setup dictionary that converts access levels to text descriptions.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/setup_access_groups">setup_access_groups</a></th><td>Initialize access groups.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/setup_template_singletons">setup_template_singletons</a></th><td>Instantiate template singletons and add them to a list.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/setup_tgui_lists">setup_tgui_lists</a></th><td>Creates various data structures that primarily get fed to tgui interfaces, although these lists are used in other places.</td></tr><tr><th><a href="datum/controller/subsystem/id_access.html#proc/tally_access">tally_access</a></th><td>Tallies up all accesses the card has that have flags greater than or equal to the access_flag supplied.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/access_groups"><aside class="declaration">var </aside>access_groups <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L10"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 10"></a></h3><p>Dictionary of access groups. Keys are typepaths. Values are instances.</p><h3 id="var/centcom_job_templates"><aside class="declaration">var </aside>centcom_job_templates <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L22"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 22"></a></h3><p>Helper list containing all template paths that can be used as Centcom templates.</p><h3 id="var/desc_by_access"><aside class="declaration">var </aside>desc_by_access <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L16"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 16"></a></h3><p>Dictionary of access names. Keys are access levels. Values are their associated names.</p><h3 id="var/static_pincodes"><aside class="declaration">var </aside>static_pincodes <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L29"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 29"></a></h3><p>Database of referenceable pincodes (Usually door codes.)</p><h3 id="var/station_groups"><aside class="declaration">var </aside>station_groups <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L26"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 26"></a></h3><p>Helper list containing all station groups.</p><h3 id="var/station_job_templates"><aside class="declaration">var </aside>station_job_templates <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L20"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 20"></a></h3><p>Helper list containing all template paths that can be used as job templates. Intended to be used alongside logic for ACCESS_CHANGE_IDS. Grab templates from sub_department_managers_tgui for Head of Staff restrictions.</p><h3 id="var/station_pda_templates"><aside class="declaration">var </aside>station_pda_templates <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L24"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 24"></a></h3><p>Helper list containing all PDA paths that can be painted by station machines. Intended to be used alongside logic for ACCESS_CHANGE_IDS. Grab templates from sub_department_managers_tgui for Head of Staff restrictions.</p><h3 id="var/sub_department_managers_tgui"><aside class="declaration">var </aside>sub_department_managers_tgui <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L18"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 18"></a></h3><p>List of accesses for the Heads of each sub-department alongside the regions they control and their job name.</p><h3 id="var/template_singletons_by_path"><aside class="declaration">var </aside>template_singletons_by_path <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L12"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 12"></a></h3><p>Dictionary of template singletons. Keys are paths. Values are their associated singletons.</p><h3 id="var/tgui_access_groups"><aside class="declaration">var </aside>tgui_access_groups <aside>– /list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L14"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 14"></a></h3><p>Specially formatted list for sending access levels to tgui interfaces.</p><h2 id="proc">Proc Details</h2><h3 id="proc/apply_template_access_to_card"><aside class="declaration">proc </aside>apply_template_access_to_card<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/card/id.html">card/id</a>/id_card, template_path)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L329"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 329"></a></aside></h3><p>Adds the accesses associated with a template to an ID card.</p>
<p>Clears the card's existing access levels first.
Primarily intended for applying template templates to cards.</p>
<p>Arguments:</p>
<ul>
<li>id_card - The ID card to remove the template from.</li>
<li>template_path - Typepath of the template to use.</li>
</ul><h3 id="proc/apply_template_to_card"><aside class="declaration">proc </aside>apply_template_to_card<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/card/id.html">card/id</a>/id_card, template_path, copy_access)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L259"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 259"></a></aside></h3><p>Applies a template singleton to a card.</p>
<p>Arguments:</p>
<ul>
<li>id_card - ID card to apply the template_path to.</li>
<li>template_path - A template path to apply to the card. Grabs the template's associated singleton and applies it.</li>
<li>copy_access - Boolean value. If true, the template's access is also copied to the card.</li>
</ul><h3 id="proc/apply_template_to_chameleon_card"><aside class="declaration">proc </aside>apply_template_to_chameleon_card<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/card/id.html">card/id</a>/<a href="obj/item/card/id/advanced.html">advanced</a>/<a href="obj/item/card/id/advanced/chameleon.html">chameleon</a>/id_card, template_path, check_forged)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L295"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 295"></a></aside></h3><ul>
<li>
<p>Applies a template to a chameleon card. This is purely visual, utilising the card's override vars.</p>
</li>
<li>
<p>Arguments:</p>
</li>
<li>
<ul>
<li>id_card - The chameleon card to apply the template visuals to.</li>
</ul>
</li>
<li>
<ul>
<li>template_path - A template path to apply to the card. Grabs the template's associated singleton and applies it.</li>
</ul>
</li>
<li>
<ul>
<li>check_forged - Boolean value. If TRUE, will not overwrite the card's assignment if the card has been forged.</li>
</ul>
</li>
</ul><h3 id="proc/get_access_desc"><aside class="declaration">proc </aside>get_access_desc<aside>(access)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L230"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 230"></a></aside></h3><p>Returns the access description associated with any given access level.</p>
<p>In proc form due to accesses being stored in the list as text instead of numbers.
Arguments:</p>
<ul>
<li>access - Access as either pure number or as a string representation of the number.</li>
</ul><h3 id="proc/get_access_for_group"><aside class="declaration">proc </aside>get_access_for_group<aside>(group_paths)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L239"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 239"></a></aside></h3><p>Returns the list of all accesses associated with any given access group.</p>
<p>Arguments:</p>
<ul>
<li>group_paths - The group type to retrieve access for. Or a list of them</li>
</ul><h3 id="proc/get_static_pincode"><aside class="declaration">proc </aside>get_static_pincode<aside>(pincode_id, code_len)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L362"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 362"></a></aside></h3><p>Get a global pin code, generates it if it doesn't already exist.
Uses the passed length only if generating.</p><h3 id="proc/refresh_job_template_singletons"><aside class="declaration">proc </aside>refresh_job_template_singletons<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L46"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 46"></a></aside></h3><p>Called by [/datum/controller/subsystem/ticker/proc/setup]</p>
<p>This runs through every /datum/access_template/job singleton and ensures that its access is setup according to
appropriate config entries.</p><h3 id="proc/remove_template_from_card"><aside class="declaration">proc </aside>remove_template_from_card<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/card/id.html">card/id</a>/id_card)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L281"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 281"></a></aside></h3><p>Removes a template from an ID card. Also removes all accesses from it too.</p>
<p>Arguments:</p>
<ul>
<li>id_card - The ID card to remove the template from.</li>
</ul><h3 id="proc/remove_template_from_chameleon_card"><aside class="declaration">proc </aside>remove_template_from_chameleon_card<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/card/id.html">card/id</a>/<a href="obj/item/card/id/advanced.html">advanced</a>/<a href="obj/item/card/id/advanced/chameleon.html">chameleon</a>/id_card)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L313"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 313"></a></aside></h3><p>Removes a template from a chameleon ID card.</p>
<p>Arguments:</p>
<ul>
<li>id_card - The ID card to remove the template from.</li>
</ul><h3 id="proc/setup_access_descriptions"><aside class="declaration">proc </aside>setup_access_descriptions<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L159"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 159"></a></aside></h3><p>Setup dictionary that converts access levels to text descriptions.</p><h3 id="proc/setup_access_groups"><aside class="declaration">proc </aside>setup_access_groups<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L58"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 58"></a></aside></h3><p>Initialize access groups.</p><h3 id="proc/setup_template_singletons"><aside class="declaration">proc </aside>setup_template_singletons<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L75"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 75"></a></aside></h3><p>Instantiate template singletons and add them to a list.</p><h3 id="proc/setup_tgui_lists"><aside class="declaration">proc </aside>setup_tgui_lists<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L80"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 80"></a></aside></h3><p>Creates various data structures that primarily get fed to tgui interfaces, although these lists are used in other places.</p><h3 id="proc/tally_access"><aside class="declaration">proc </aside>tally_access<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/card/id.html">card/id</a>/id_card, access_group)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/controllers/subsystem/id_access.dm#L351"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/id_access.dm 351"></a></aside></h3><p>Tallies up all accesses the card has that have flags greater than or equal to the access_flag supplied.</p>
<p>Returns the number of accesses that are in the given access group.
Arguments:</p>
<ul>
<li>id_card - The ID card to tally up access for.</li>
<li>access_group - A typepath to check access for.</li>
</ul></main><footer>daedalus.dme <a href="https://github.com/DaedalusDock/daedalusdock/tree/a11ad7c401daeb2805315aa8820f21ea7c1bf233">a11ad7c</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>