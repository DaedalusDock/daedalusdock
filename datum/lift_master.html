<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/lift_master - Daedalus Dock</title></head><body><header><a href="index.html">Daedalus Dock</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/lift_master.html#var">Var Details</a> - <a href="datum/lift_master.html#proc">Proc Details</a></header><main><h1>lift_master <aside>/<a href="datum.html">datum</a>/<a href="datum/lift_master.html">lift_master</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L6"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 6"></a></h1><p>coordinate and control movement across linked industrial_lift's. allows moving large single multitile platforms and many 1 tile platforms.
also is capable of linking platforms across linked z levels</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/lift_master.html#var/allowed_travel_directions">allowed_travel_directions</a></th><td>what directions we're allowed to move</td></tr><tr><th><a href="datum/lift_master.html#var/controls_locked">controls_locked</a></th><td>if true, the lift cannot be manually moved.</td></tr><tr><th><a href="datum/lift_master.html#var/create_multitile_platform">create_multitile_platform</a></th><td>taken from our lift platforms. if true we go through each z level of platforms and attempt to make the lowest left corner platform
into one giant multitile object the size of all other platforms on that z level.</td></tr><tr><th><a href="datum/lift_master.html#var/ignored_smashthroughs">ignored_smashthroughs</a></th><td>Typepath list of what to ignore smashing through, controls all lifts</td></tr><tr><th><a href="datum/lift_master.html#var/lift_id">lift_id</a></th><td>lift_id taken from our base lift platform, used to put us into GLOB.active_lifts_by_type</td></tr><tr><th><a href="datum/lift_master.html#var/lift_platforms">lift_platforms</a></th><td>the lift platforms we consider as part of this lift. ordered in order of lowest z level to highest z level after init.
(the sorting algorithm sucks btw)</td></tr><tr><th><a href="datum/lift_master.html#var/multitile_platform">multitile_platform</a></th><td>whether the lift handled by this lift_master datum is multitile as opposed to nxm platforms per z level</td></tr><tr><th><a href="datum/lift_master.html#var/specific_lift_id">specific_lift_id</a></th><td>overridable ID string to link control units to this specific lift_master datum. created by placing a lift id landmark object
somewhere on the tram, if its anywhere on the tram we'll find it in init and set this to whatever it specifies</td></tr><tr><th><a href="datum/lift_master.html#var/z_sorted">z_sorted</a></th><td>lift platforms have already been sorted in order of z level.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/lift_master.html#proc/Check_lift_move">Check_lift_move</a></th><td>Check destination turfs</td></tr><tr><th><a href="datum/lift_master.html#proc/MoveLift">MoveLift</a></th><td>Moves the lift UP or DOWN, this is what users invoke with their hand.
This is a SAFE proc, ensuring every part of the lift moves SANELY.
It also locks controls for the (miniscule) duration of the movement, so the elevator cannot be broken by spamming.
Arguments:
going - UP or DOWN directions, where the lift should go. Keep in mind by this point checks of whether it should go up or down have already been done.
user - Whomever made the lift movement.</td></tr><tr><th><a href="datum/lift_master.html#proc/MoveLiftHorizontal">MoveLiftHorizontal</a></th><td>Moves the lift, this is what users invoke with their hand.
This is a SAFE proc, ensuring every part of the lift moves SANELY.
It also locks controls for the (miniscule) duration of the movement, so the elevator cannot be broken by spamming.</td></tr><tr><th><a href="datum/lift_master.html#proc/Rebuild_lift_plaform">Rebuild_lift_plaform</a></th><td>Collect all bordered platforms via a simple floodfill algorithm. allows multiz trams because its funny</td></tr><tr><th><a href="datum/lift_master.html#proc/check_for_landmarks">check_for_landmarks</a></th><td>check for any landmarks placed inside the locs of the given lift_platform</td></tr><tr><th><a href="datum/lift_master.html#proc/create_multitile_platform_for_z_level">create_multitile_platform_for_z_level</a></th><td>goes through all platforms in the given list and finds the one in the lower left corner</td></tr><tr><th><a href="datum/lift_master.html#proc/get_platforms_on_level">get_platforms_on_level</a></th><td>returns all industrial_lifts associated with this tram on the given z level or given atoms z level</td></tr><tr><th><a href="datum/lift_master.html#proc/order_platforms_by_z_level">order_platforms_by_z_level</a></th><td>orders the lift platforms in order of lowest z level to highest z level.</td></tr><tr><th><a href="datum/lift_master.html#proc/reset_lift_contents">reset_lift_contents</a></th><td>resets the contents of all platforms to their original state in case someone put a bunch of shit onto the tram.
intended to be called by admins. passes all arguments to reset_contents() for each of our platforms.</td></tr><tr><th><a href="datum/lift_master.html#proc/return_closest_platform_to">return_closest_platform_to</a></th><td>returns the closest lift to the specified atom, prioritizing lifts on the same z level. used for comparing distance</td></tr><tr><th><a href="datum/lift_master.html#proc/set_controls">set_controls</a></th><td>Sets all lift parts's controls_locked variable. Used to prevent moving mid movement, or cooldowns.</td></tr><tr><th><a href="datum/lift_master.html#proc/set_info_from_id_landmark">set_info_from_id_landmark</a></th><td>set vars and such given an overriding lift_id landmark</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/allowed_travel_directions"><aside class="declaration">var </aside>allowed_travel_directions <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 35"></a></h3><p>what directions we're allowed to move</p><h3 id="var/controls_locked"><aside class="declaration">var </aside>controls_locked <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 38"></a></h3><p>if true, the lift cannot be manually moved.</p><h3 id="var/create_multitile_platform"><aside class="declaration">var </aside>create_multitile_platform <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 23"></a></h3><p>taken from our lift platforms. if true we go through each z level of platforms and attempt to make the lowest left corner platform
into one giant multitile object the size of all other platforms on that z level.</p><h3 id="var/ignored_smashthroughs"><aside class="declaration">var </aside>ignored_smashthroughs <aside>– /static/list</aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 12"></a></h3><p>Typepath list of what to ignore smashing through, controls all lifts</p><h3 id="var/lift_id"><aside class="declaration">var </aside>lift_id <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 29"></a></h3><p>lift_id taken from our base lift platform, used to put us into GLOB.active_lifts_by_type</p><h3 id="var/lift_platforms"><aside class="declaration">var </aside>lift_platforms <aside>– /list/<a href="obj.html">obj</a>/<a href="obj/structure/industrial_lift.html">structure/industrial_lift</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 9"></a></h3><p>the lift platforms we consider as part of this lift. ordered in order of lowest z level to highest z level after init.
(the sorting algorithm sucks btw)</p><h3 id="var/multitile_platform"><aside class="declaration">var </aside>multitile_platform <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L19"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 19"></a></h3><p>whether the lift handled by this lift_master datum is multitile as opposed to nxm platforms per z level</p><h3 id="var/specific_lift_id"><aside class="declaration">var </aside>specific_lift_id <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 33"></a></h3><p>overridable ID string to link control units to this specific lift_master datum. created by placing a lift id landmark object
somewhere on the tram, if its anywhere on the tram we'll find it in init and set this to whatever it specifies</p><h3 id="var/z_sorted"><aside class="declaration">var </aside>z_sorted <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L26"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 26"></a></h3><p>lift platforms have already been sorted in order of z level.</p><h2 id="proc">Proc Details</h2><h3 id="proc/Check_lift_move"><aside class="declaration">proc </aside>Check_lift_move<aside>(check_dir)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L365"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 365"></a></aside></h3><p>Check destination turfs</p><h3 id="proc/MoveLift"><aside class="declaration">proc </aside>MoveLift<aside>(going, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L267"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 267"></a></aside></h3><p>Moves the lift UP or DOWN, this is what users invoke with their hand.
This is a SAFE proc, ensuring every part of the lift moves SANELY.
It also locks controls for the (miniscule) duration of the movement, so the elevator cannot be broken by spamming.
Arguments:
going - UP or DOWN directions, where the lift should go. Keep in mind by this point checks of whether it should go up or down have already been done.
user - Whomever made the lift movement.</p><h3 id="proc/MoveLiftHorizontal"><aside class="declaration">proc </aside>MoveLiftHorizontal<aside>(going)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L290"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 290"></a></aside></h3><p>Moves the lift, this is what users invoke with their hand.
This is a SAFE proc, ensuring every part of the lift moves SANELY.
It also locks controls for the (miniscule) duration of the movement, so the elevator cannot be broken by spamming.</p><h3 id="proc/Rebuild_lift_plaform"><aside class="declaration">proc </aside>Rebuild_lift_plaform<aside>(/<a href="obj.html">obj</a>/<a href="obj/structure/industrial_lift.html">structure/industrial_lift</a>/base_lift_platform)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L93"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 93"></a></aside></h3><p>Collect all bordered platforms via a simple floodfill algorithm. allows multiz trams because its funny</p><h3 id="proc/check_for_landmarks"><aside class="declaration">proc </aside>check_for_landmarks<aside>(/<a href="obj.html">obj</a>/<a href="obj/structure/industrial_lift.html">structure/industrial_lift</a>/new_lift_platform)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L111"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 111"></a></aside></h3><p>check for any landmarks placed inside the locs of the given lift_platform</p><h3 id="proc/create_multitile_platform_for_z_level"><aside class="declaration">proc </aside>create_multitile_platform_for_z_level<aside>(/list/<a href="obj.html">obj</a>/<a href="obj/structure/industrial_lift.html">structure/industrial_lift</a>/platforms_in_z)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L165"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 165"></a></aside></h3><p>goes through all platforms in the given list and finds the one in the lower left corner</p><h3 id="proc/get_platforms_on_level"><aside class="declaration">proc </aside>get_platforms_on_level<aside>(/<a href="atom.html">atom</a>/atom_reference_OR_z_level_number)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L243"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 243"></a></aside></h3><p>returns all industrial_lifts associated with this tram on the given z level or given atoms z level</p><h3 id="proc/order_platforms_by_z_level"><aside class="declaration">proc </aside>order_platforms_by_z_level<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L133"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 133"></a></aside></h3><p>orders the lift platforms in order of lowest z level to highest z level.</p><h3 id="proc/reset_lift_contents"><aside class="declaration">proc </aside>reset_lift_contents<aside>(consider_anything_past, foreign_objects, foreign_non_player_mobs, consider_player_mobs)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L393"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 393"></a></aside></h3><p>resets the contents of all platforms to their original state in case someone put a bunch of shit onto the tram.
intended to be called by admins. passes all arguments to reset_contents() for each of our platforms.</p>
<p>Arguments:</p>
<ul>
<li>consider_anything_past - number. if &gt; 0 our platforms will only handle foreign contents that exceed this number in each of their locs</li>
<li>foreign_objects - bool. if true our platforms will consider /atom/movable's that arent mobs as part of foreign contents</li>
<li>foreign_non_player_mobs - bool. if true our platforms consider mobs that dont have a mind to be foreign</li>
<li>consider_player_mobs - bool. if true our platforms consider player mobs to be foreign. only works if foreign_non_player_mobs is true as well</li>
</ul><h3 id="proc/return_closest_platform_to"><aside class="declaration">proc </aside>return_closest_platform_to<aside>(/<a href="atom.html">atom</a>/comparison, allow_multiple_answers)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L209"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 209"></a></aside></h3><p>returns the closest lift to the specified atom, prioritizing lifts on the same z level. used for comparing distance</p><h3 id="proc/set_controls"><aside class="declaration">proc </aside>set_controls<aside>(state)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L380"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 380"></a></aside></h3><p>Sets all lift parts's controls_locked variable. Used to prevent moving mid movement, or cooldowns.</p><h3 id="proc/set_info_from_id_landmark"><aside class="declaration">proc </aside>set_info_from_id_landmark<aside>(/<a href="obj.html">obj</a>/<a href="obj/effect/landmark/lift_id.html">effect/landmark/lift_id</a>/landmark)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608/code/modules/industrial_lift/lift_master.dm#L121"><img src="git.png" width="16" height="16" title="code/modules/industrial_lift/lift_master.dm 121"></a></aside></h3><p>set vars and such given an overriding lift_id landmark</p></main><footer>daedalus.dme <a href="https://github.com/DaedalusDock/daedalusdock/tree/5ab5b0f18ffcc40cf3a31f75d1e3f6bac0eb7608">5ab5b0f</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>