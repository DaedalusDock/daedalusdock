<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/machinery - Daedalus Dock</title></head><body><header><a href="index.html">Daedalus Dock</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/machinery.html#var">Var Details</a> - <a href="obj/machinery.html#proc">Proc Details</a></header><main><h1>machinery <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L87"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 87"></a></h1><p>Machines in the world, such as computers, pipes, and airlocks.</p>
<p>Overview:
Used to create objects that need a per step proc call.  Default definition of 'Initialize()'
stores a reference to src machine in global 'machines list'.  Default definition
of 'Destroy' removes reference to src machine in global 'machines list'.</p>
<p>Class Variables:
use_power (num)
current state of auto power use.
Possible Values:
NO_POWER_USE -- no auto power use
IDLE_POWER_USE -- machine is using power at its idle power level
ACTIVE_POWER_USE -- machine is using power at its active power level</p>
<p>active_power_usage (num)
Value for the amount of power to use when in active power mode</p>
<p>idle_power_usage (num)
Value for the amount of power to use when in idle power mode</p>
<p>power_channel (num)
What channel to draw from when drawing power for power mode
Possible Values:
AREA_USAGE_EQUIP:1 -- Equipment Channel
AREA_USAGE_LIGHT:2 -- Lighting Channel
AREA_USAGE_ENVIRON:3 -- Environment Channel</p>
<p>component_parts (list)
A list of component parts of machine used by frame based machines.</p>
<p>stat (bitflag)
Machine status bit flags.
Possible bit flags:
BROKEN -- Machine is broken
NOPOWER -- No power is being supplied to machine.
MAINT -- machine is currently under going maintenance.
EMPED -- temporary broken by EMP pulse</p>
<p>Class Procs:
Initialize()</p>
<p>Destroy()</p>
<pre><code>update_mode_power_usage()
	updates the static_power_usage var of this machine and makes its static power usage from its area accurate.
	called after the idle or active power usage has been changed.

update_power_channel()
	updates the static_power_usage var of this machine and makes its static power usage from its area accurate.
	called after the power_channel var has been changed or called to change the var itself.

unset_static_power()
	completely removes the current static power usage of this machine from its area.
	used in the other power updating procs to then readd the correct power usage.


default definition uses 'use_power', 'power_channel', 'active_power_usage',
 'idle_power_usage', 'powered()', and 'use_power()' implement behavior.
</code></pre>
<p>powered(chan = -1)         'modules/power/power.dm'
Checks to see if area that contains the object has power available for power
channel given in 'chan'. -1 defaults to power_channel</p>
<p>use_power(amount, chan=-1)   'modules/power/power.dm'
Deducts 'amount' from the power channel 'chan' of the area that contains the object.</p>
<p>power_change()               'modules/power/power.dm'
Called by the area that contains the object when ever that area under goes a
power state change (area runs out of power, or area channel is turned off).</p>
<p>RefreshParts()               'game/machinery/machine.dm'
Called to refresh the variables in the machine that are contributed to by parts
contained in the component_parts list. (example: glass and material amounts for
the autolathe)</p>
<pre><code>default definition does nothing.
</code></pre>
<p>process()                  'game/machinery/machine.dm'
Called by the 'machinery subsystem' once per machinery tick for each machine that is listed in its 'machines' list.</p>
<p>process_atmos()
Called by the 'air subsystem' once per atmos tick for each machine that is listed in its 'atmos_machines' list.
Compiled by Aygar</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/machinery.html#var/active_power_usage">active_power_usage</a></th><td>the amount of static power load this machine adds to its area's power_usage list when use_power = ACTIVE_POWER_USE</td></tr><tr><th><a href="obj/machinery.html#var/atmos_processing">atmos_processing</a></th><td>Is this machine currently in the atmos machinery queue?</td></tr><tr><th><a href="obj/machinery.html#var/has_disk_slot">has_disk_slot</a></th><td>Can insert a disk into this machine</td></tr><tr><th><a href="obj/machinery.html#var/hibernating">hibernating</a></th><td>Used by SSairmachines for optimizing scrubbers and vent pumps.</td></tr><tr><th><a href="obj/machinery.html#var/idle_power_usage">idle_power_usage</a></th><td>the amount of static power load this machine adds to its area's power_usage list when use_power = IDLE_POWER_USE</td></tr><tr><th><a href="obj/machinery.html#var/inserted_disk">inserted_disk</a></th><td>A design disk that may-or-may-not be inserted into this machine.</td></tr><tr><th><a href="obj/machinery.html#var/internal_disk">internal_disk</a></th><td>The place that designs are stored. This will be created by apply_default_parts().</td></tr><tr><th><a href="obj/machinery.html#var/is_operational">is_operational</a></th><td>A combination of factors such as having power, not being broken and so on. Boolean.</td></tr><tr><th><a href="obj/machinery.html#var/last_used_time">last_used_time</a></th><td>world.time of last use by <a href="mob/living.html" title="/mob/living">/mob/living</a></td></tr><tr><th><a href="obj/machinery.html#var/last_user_mobtype">last_user_mobtype</a></th><td>Mobtype of last user. Typecast to <a href="mob/living.html" title="/mob/living">/mob/living</a> for initial() usage</td></tr><tr><th><a href="obj/machinery.html#var/master_id">master_id</a></th><td>General purpose 'master' ID for slave machines.</td></tr><tr><th><a href="obj/machinery.html#var/net_class">net_class</a></th><td>A short string shown to players fingerprinting the device type as part of <code>command:ping</code></td></tr><tr><th><a href="obj/machinery.html#var/net_id">net_id</a></th><td>Network ID, see network_flags for autopopulation info.</td></tr><tr><th><a href="obj/machinery.html#var/netjack">netjack</a></th><td>Linked Network Terminal</td></tr><tr><th><a href="obj/machinery.html#var/network_flags">network_flags</a></th><td>Do we use packet networks/link to netjacks?
see _DEFINES/packetnet.dm</td></tr><tr><th><a href="obj/machinery.html#var/ping_addition">ping_addition</a></th><td>Additional data stapled to pings, reduces network usage for some machines.</td></tr><tr><th><a href="obj/machinery.html#var/processing_flags">processing_flags</a></th><td>Viable flags to go here are START_PROCESSING_ON_INIT, or START_PROCESSING_MANUALLY. See code__DEFINES\machines.dm for more information on these flags.</td></tr><tr><th><a href="obj/machinery.html#var/selected_disk">selected_disk</a></th><td>Used for data management. Use get_selected_disk() to get the actual disk ref.</td></tr><tr><th><a href="obj/machinery.html#var/static_power_usage">static_power_usage</a></th><td>the current amount of static power usage this machine is taking from its area</td></tr><tr><th><a href="obj/machinery.html#var/subsystem_type">subsystem_type</a></th><td>What subsystem this machine will use, which is generally SSmachines or SSfastprocess. By default all machinery use SSmachines. This fires a machine's process() roughly every 2 seconds.</td></tr><tr><th><a href="obj/machinery.html#var/use_power">use_power</a></th><td>This is for automatic power consumption.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/machinery.html#proc/AI_notify_hack">AI_notify_hack</a></th><td>Alerts the AI that a hack is in progress.</td></tr><tr><th><a href="obj/machinery.html#proc/begin_processing">begin_processing</a></th><td>Helper proc for telling a machine to start processing with the subsystem type that is located in its <code>subsystem_type</code> var.</td></tr><tr><th><a href="obj/machinery.html#proc/clear_components">clear_components</a></th><td>This should be called before mass qdeling components to make space for replacements.
If not done, things will go awry as Exited() destroys the machine when it detects
even a single component exiting the atom.</td></tr><tr><th><a href="obj/machinery.html#proc/create_signal">create_signal</a></th><td>A wrapper to generate basic, minimally-compliant data packets easily.
Returns a <code>datum/signal</code> with prefilled <code>s_addr</code> and <code>d_addr</code> added to <code>datagram</code></td></tr><tr><th><a href="obj/machinery.html#proc/directly_use_power">directly_use_power</a></th><td>An alternative to 'use_power', this proc directly costs the APC in direct charge, as opposed to being calculated periodically.</td></tr><tr><th><a href="obj/machinery.html#proc/disk_get_designs">disk_get_designs</a></th><td>Returns valid fabrication designs stored on the disk at the specified file. Returns the real list!</td></tr><tr><th><a href="obj/machinery.html#proc/disk_get_file">disk_get_file</a></th><td>Get a file by name. Caller must assure type.</td></tr><tr><th><a href="obj/machinery.html#proc/disk_get_gene_buffer">disk_get_gene_buffer</a></th><td>Returns stored genetic mutations. Returns the real list!</td></tr><tr><th><a href="obj/machinery.html#proc/disk_get_gene_mutations">disk_get_gene_mutations</a></th><td>Returns stored genetic mutations. Returns the real list!</td></tr><tr><th><a href="obj/machinery.html#proc/disk_write_file">disk_write_file</a></th><td>Attempt to write a file to disk. May fail due to size limits.</td></tr><tr><th><a href="obj/machinery.html#proc/dump_contents">dump_contents</a></th><td>Drop every movable atom in the machine's contents list, including any components and circuit.</td></tr><tr><th><a href="obj/machinery.html#proc/dump_inventory_contents">dump_inventory_contents</a></th><td>Drop every movable atom in the machine's contents list that is not a component_part.</td></tr><tr><th><a href="obj/machinery.html#proc/eject_disk">eject_disk</a></th><td>Eject an inserted disk. Pass a user to put the disk in their hands.</td></tr><tr><th><a href="obj/machinery.html#proc/end_processing">end_processing</a></th><td>Helper proc for telling a machine to stop processing with the subsystem type that is located in its <code>subsystem_type</code> var.</td></tr><tr><th><a href="obj/machinery.html#proc/get_selected_disk">get_selected_disk</a></th><td>Gets the currently selected disk according to the selected disk var.</td></tr><tr><th><a href="obj/machinery.html#proc/link_to_jack">link_to_jack</a></th><td>Attempt to locate a network jack on the same tile and link to it, unlinking from any existing terminal.
Passes through the return code from [/obj/machinery/power/data_terminal/proc/connect_machine()]</td></tr><tr><th><a href="obj/machinery.html#proc/on_set_is_operational">on_set_is_operational</a></th><td>Called when the value of <code>is_operational</code> changes, so we can react to it.</td></tr><tr><th><a href="obj/machinery.html#proc/on_set_machine_stat">on_set_machine_stat</a></th><td>Called when the value of <code>machine_stat</code> changes, so we can react to it.</td></tr><tr><th><a href="obj/machinery.html#proc/open_machine">open_machine</a></th><td>Opens the machine.</td></tr><tr><th><a href="obj/machinery.html#proc/post_signal">post_signal</a></th><td>Send a signal from a ref. Data sent in signals must be dereferenced.
If you're sending a forged source address (You should have a good reason for this...) set `preserve_s_addr = TRUE</td></tr><tr><th><a href="obj/machinery.html#proc/power_change">power_change</a></th><td>Called whenever the power settings of the containing area change</td></tr><tr><th><a href="obj/machinery.html#proc/receive_wireline_signal">receive_wireline_signal</a></th><td>Wrapper for wireline packets received from data terminals/netjacks, Includes the origin jack as an arg.
This allows machines with multiple interfaces to track it's origin.</td></tr><tr><th><a href="obj/machinery.html#proc/remove_area_power_relationship">remove_area_power_relationship</a></th><td>proc to call when the machine stops requiring power after a duration of requiring power
saves memory by removing the power relationship with its area if it exists and loses area sensitivity
does not affect power usage itself</td></tr><tr><th><a href="obj/machinery.html#proc/set_inserted_disk">set_inserted_disk</a></th><td>Setter for inserted disk.</td></tr><tr><th><a href="obj/machinery.html#proc/set_internal_disk">set_internal_disk</a></th><td>Setter for internal disk.</td></tr><tr><th><a href="obj/machinery.html#proc/set_is_operational">set_is_operational</a></th><td>Called when we want to change the value of the <code>is_operational</code> variable. Boolean.</td></tr><tr><th><a href="obj/machinery.html#proc/set_machine_stat">set_machine_stat</a></th><td>Called when we want to change the value of the machine_stat variable. Holds bitflags.</td></tr><tr><th><a href="obj/machinery.html#proc/setup_area_power_relationship">setup_area_power_relationship</a></th><td>proc to call when the machine starts to require power after a duration of not requiring power
sets up power related connections to its area if it exists and becomes area sensitive
does not affect power usage itself</td></tr><tr><th><a href="obj/machinery.html#proc/spawn_frame">spawn_frame</a></th><td>Spawns a frame where this machine is. If the machine was not disassmbled, the
frame is spawned damaged. If the frame couldn't exist on this turf, it's smashed
down to metal sheets.</td></tr><tr><th><a href="obj/machinery.html#proc/toggle_disk">toggle_disk</a></th><td>Toggle the selected disk between internal and inserted.</td></tr><tr><th><a href="obj/machinery.html#proc/try_put_in_hand">try_put_in_hand</a></th><td>Puts passed object in to user's hand</td></tr><tr><th><a href="obj/machinery.html#proc/unlink_from_jack">unlink_from_jack</a></th><td>Unlink from a network terminal
<code>ignore_check</code> is used as part of machinery destroy.</td></tr><tr><th><a href="obj/machinery.html#proc/unset_static_power">unset_static_power</a></th><td>internal proc that removes all static power usage from the current area</td></tr><tr><th><a href="obj/machinery.html#proc/update_current_power_usage">update_current_power_usage</a></th><td>makes this machine draw power from its area according to which use_power mode it is set to</td></tr><tr><th><a href="obj/machinery.html#proc/update_mode_power_usage">update_mode_power_usage</a></th><td>sets the power_usage linked to the specified use_power_mode to new_usage
e.g. update_mode_power_usage(ACTIVE_POWER_USE, 10) sets active_power_use = 10 and updates its power draw from the machines area if use_power == ACTIVE_POWER_USE</td></tr><tr><th><a href="obj/machinery.html#proc/update_power_channel">update_power_channel</a></th><td>updates the power channel this machine uses. removes the static power usage from the old channel and readds it to the new channel</td></tr><tr><th><a href="obj/machinery.html#proc/update_use_power">update_use_power</a></th><td>updates the use_power var for this machine and updates its static power usage from its area to reflect the new value</td></tr><tr><th><a href="obj/machinery.html#proc/use_power_from_net">use_power_from_net</a></th><td>Attempts to draw power directly from the APC's Powernet rather than the APC's battery. For high-draw machines, like the cell charger</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/active_power_usage"><aside class="declaration">var </aside>active_power_usage <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L114"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 114"></a></h3><p>the amount of static power load this machine adds to its area's power_usage list when use_power = ACTIVE_POWER_USE</p><h3 id="var/atmos_processing"><aside class="declaration">var </aside>atmos_processing <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L152"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 152"></a></h3><p>Is this machine currently in the atmos machinery queue?</p><h3 id="var/has_disk_slot"><aside class="declaration">var </aside>has_disk_slot <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L131"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 131"></a></h3><p>Can insert a disk into this machine</p><h3 id="var/hibernating"><aside class="declaration">var </aside>hibernating <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L177"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 177"></a></h3><p>Used by SSairmachines for optimizing scrubbers and vent pumps.</p><h3 id="var/idle_power_usage"><aside class="declaration">var </aside>idle_power_usage <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L112"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 112"></a></h3><p>the amount of static power load this machine adds to its area's power_usage list when use_power = IDLE_POWER_USE</p><h3 id="var/inserted_disk"><aside class="declaration">var </aside>inserted_disk <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L127"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 127"></a></h3><p>A design disk that may-or-may-not be inserted into this machine.</p><h3 id="var/internal_disk"><aside class="declaration">var </aside>internal_disk <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L125"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 125"></a></h3><p>The place that designs are stored. This will be created by apply_default_parts().</p><h3 id="var/is_operational"><aside class="declaration">var </aside>is_operational <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L120"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 120"></a></h3><p>A combination of factors such as having power, not being broken and so on. Boolean.</p><h3 id="var/last_used_time"><aside class="declaration">var </aside>last_used_time <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L154"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 154"></a></h3><p>world.time of last use by <a href="mob/living.html" title="/mob/living">/mob/living</a></p><h3 id="var/last_user_mobtype"><aside class="declaration">var </aside>last_user_mobtype <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L156"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 156"></a></h3><p>Mobtype of last user. Typecast to <a href="mob/living.html" title="/mob/living">/mob/living</a> for initial() usage</p><h3 id="var/master_id"><aside class="declaration">var </aside>master_id <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L170"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 170"></a></h3><p>General purpose 'master' ID for slave machines.</p><h3 id="var/net_class"><aside class="declaration">var </aside>net_class <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L172"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 172"></a></h3><p>A short string shown to players fingerprinting the device type as part of <code>command:ping</code></p><h3 id="var/net_id"><aside class="declaration">var </aside>net_id <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L168"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 168"></a></h3><p>Network ID, see network_flags for autopopulation info.</p><h3 id="var/netjack"><aside class="declaration">var </aside>netjack <aside>– /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/power/data_terminal.html">power/data_terminal</a></aside> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L166"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 166"></a></h3><p>Linked Network Terminal</p><h3 id="var/network_flags"><aside class="declaration">var </aside>network_flags <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L161"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 161"></a></h3><p>Do we use packet networks/link to netjacks?
see _DEFINES/packetnet.dm</p><h3 id="var/ping_addition"><aside class="declaration">var </aside>ping_addition <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L174"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 174"></a></h3><p>Additional data stapled to pings, reduces network usage for some machines.</p><h3 id="var/processing_flags"><aside class="declaration">var </aside>processing_flags <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L139"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 139"></a></h3><p>Viable flags to go here are START_PROCESSING_ON_INIT, or START_PROCESSING_MANUALLY. See code__DEFINES\machines.dm for more information on these flags.</p><h3 id="var/selected_disk"><aside class="declaration">var </aside>selected_disk <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L129"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 129"></a></h3><p>Used for data management. Use get_selected_disk() to get the actual disk ref.</p><h3 id="var/static_power_usage"><aside class="declaration">var </aside>static_power_usage <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L116"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 116"></a></h3><p>the current amount of static power usage this machine is taking from its area</p><h3 id="var/subsystem_type"><aside class="declaration">var </aside>subsystem_type <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L141"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 141"></a></h3><p>What subsystem this machine will use, which is generally SSmachines or SSfastprocess. By default all machinery use SSmachines. This fires a machine's process() roughly every 2 seconds.</p><h3 id="var/use_power"><aside class="declaration">var </aside>use_power <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L107"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 107"></a></h3><p>This is for automatic power consumption.</p><h2 id="proc">Proc Details</h2><h3 id="proc/AI_notify_hack"><aside class="declaration">proc </aside>AI_notify_hack<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L1093"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 1093"></a></aside></h3><p>Alerts the AI that a hack is in progress.</p>
<p>Sends all AIs a message that a hack is occurring.  Specifically used for space ninja tampering as this proc was originally in the ninja files.
However, the proc may also be used elsewhere.</p><h3 id="proc/begin_processing"><aside class="declaration">proc </aside>begin_processing<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L278"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 278"></a></aside></h3><p>Helper proc for telling a machine to start processing with the subsystem type that is located in its <code>subsystem_type</code> var.</p><h3 id="proc/clear_components"><aside class="declaration">proc </aside>clear_components<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L861"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 861"></a></aside></h3><p>This should be called before mass qdeling components to make space for replacements.
If not done, things will go awry as Exited() destroys the machine when it detects
even a single component exiting the atom.</p><h3 id="proc/create_signal"><aside class="declaration">proc </aside>create_signal<aside>(destination_id, /list/datagram)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/datanet/_networked.dm#L6"><img src="git.png" width="16" height="16" title="code/game/machinery/datanet/_networked.dm 6"></a></aside></h3><p>A wrapper to generate basic, minimally-compliant data packets easily.
Returns a <code>datum/signal</code> with prefilled <code>s_addr</code> and <code>d_addr</code> added to <code>datagram</code></p><h3 id="proc/directly_use_power"><aside class="declaration">proc </aside>directly_use_power<aside>(amount)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/power/power.dm#L116"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 116"></a></aside></h3><p>An alternative to 'use_power', this proc directly costs the APC in direct charge, as opposed to being calculated periodically.</p>
<ul>
<li>Amount: How much power the APC's cell is to be costed.</li>
</ul><h3 id="proc/disk_get_designs"><aside class="declaration">proc </aside>disk_get_designs<aside>(file_name, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a>/target_disk)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L106"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 106"></a></aside></h3><p>Returns valid fabrication designs stored on the disk at the specified file. Returns the real list!</p><h3 id="proc/disk_get_file"><aside class="declaration">proc </aside>disk_get_file<aside>(file_name, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a>/target_disk) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/c4_file.html">c4_file</a> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L86"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 86"></a></aside></h3><p>Get a file by name. Caller must assure type.</p><h3 id="proc/disk_get_gene_buffer"><aside class="declaration">proc </aside>disk_get_gene_buffer<aside>(file_name, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a>/target_disk) <span class="as"> as </span>/list <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L125"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 125"></a></aside></h3><p>Returns stored genetic mutations. Returns the real list!</p><h3 id="proc/disk_get_gene_mutations"><aside class="declaration">proc </aside>disk_get_gene_mutations<aside>(file_name, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a>/target_disk) <span class="as"> as </span>/list <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L115"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 115"></a></aside></h3><p>Returns stored genetic mutations. Returns the real list!</p><h3 id="proc/disk_write_file"><aside class="declaration">proc </aside>disk_write_file<aside>(/<a href="datum.html">datum</a>/<a href="datum/c4_file.html">c4_file</a>/new_file, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a>/target_disk)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L79"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 79"></a></aside></h3><p>Attempt to write a file to disk. May fail due to size limits.</p><h3 id="proc/dump_contents">dump_contents<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L341"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 341"></a></aside></h3><p>Drop every movable atom in the machine's contents list, including any components and circuit.</p><h3 id="proc/dump_inventory_contents"><aside class="declaration">proc </aside>dump_inventory_contents<aside>(/list/subset)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L364"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 364"></a></aside></h3><p>Drop every movable atom in the machine's contents list that is not a component_part.</p>
<p>Proc does not drop components and will skip over anything in the component_parts list.
Call dump_contents() to drop all contents including components.
Arguments:</p>
<ul>
<li>subset - If this is not null, only atoms that are also contained within the subset list will be dropped.</li>
</ul><h3 id="proc/eject_disk"><aside class="declaration">proc </aside>eject_disk<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L40"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 40"></a></aside></h3><p>Eject an inserted disk. Pass a user to put the disk in their hands.</p><h3 id="proc/end_processing"><aside class="declaration">proc </aside>end_processing<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L283"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 283"></a></aside></h3><p>Helper proc for telling a machine to stop processing with the subsystem type that is located in its <code>subsystem_type</code> var.</p><h3 id="proc/get_selected_disk"><aside class="declaration">proc </aside>get_selected_disk<aside>() <span class="as"> as </span>/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a> <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L10"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 10"></a></aside></h3><p>Gets the currently selected disk according to the selected disk var.</p><h3 id="proc/link_to_jack"><aside class="declaration">proc </aside>link_to_jack<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/datanet/_networked.dm#L57"><img src="git.png" width="16" height="16" title="code/game/machinery/datanet/_networked.dm 57"></a></aside></h3><p>Attempt to locate a network jack on the same tile and link to it, unlinking from any existing terminal.
Passes through the return code from [/obj/machinery/power/data_terminal/proc/connect_machine()]</p><h3 id="proc/on_set_is_operational"><aside class="declaration">proc </aside>on_set_is_operational<aside>(old_value)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L544"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 544"></a></aside></h3><p>Called when the value of <code>is_operational</code> changes, so we can react to it.</p><h3 id="proc/on_set_machine_stat"><aside class="declaration">proc </aside>on_set_machine_stat<aside>(old_value)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L307"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 307"></a></aside></h3><p>Called when the value of <code>machine_stat</code> changes, so we can react to it.</p><h3 id="proc/open_machine"><aside class="declaration">proc </aside>open_machine<aside>(drop)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L330"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 330"></a></aside></h3><p>Opens the machine.</p>
<p>Will update the machine icon and any user interfaces currently open.
Arguments:</p>
<ul>
<li>drop - Boolean. Whether to drop any stored items in the machine. Does not include components.</li>
</ul><h3 id="proc/post_signal"><aside class="declaration">proc </aside>post_signal<aside>(/<a href="datum.html">datum</a>/<a href="datum/signal.html">signal</a>/sending_signal, preserve_s_addr)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/datanet/_networked.dm#L19"><img src="git.png" width="16" height="16" title="code/game/machinery/datanet/_networked.dm 19"></a></aside></h3><p>Send a signal from a ref. Data sent in signals must be dereferenced.
If you're sending a forged source address (You should have a good reason for this...) set `preserve_s_addr = TRUE</p>
<p>NONE OF THE ABOVE IS TRUE IF YOU ARE <code>machinery/power</code>, AS THEY DEAL DIRECTLY WITH SSPACKETS INSTEAD OF ABSTRACTED TERMINALS</p><h3 id="proc/power_change"><aside class="declaration">proc </aside>power_change<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/power/power.dm#L177"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 177"></a></aside></h3><p>Called whenever the power settings of the containing area change</p>
<p>by default, check equipment channel &amp; set flag, can override if needed</p>
<p>Returns TRUE if the NOPOWER flag was toggled</p><h3 id="proc/receive_wireline_signal"><aside class="declaration">proc </aside>receive_wireline_signal<aside>(/<a href="datum.html">datum</a>/<a href="datum/signal.html">signal</a>/signal, /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/power/packet_source)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/datanet/_networked.dm#L49"><img src="git.png" width="16" height="16" title="code/game/machinery/datanet/_networked.dm 49"></a></aside></h3><p>Wrapper for wireline packets received from data terminals/netjacks, Includes the origin jack as an arg.
This allows machines with multiple interfaces to track it's origin.</p><h3 id="proc/remove_area_power_relationship"><aside class="declaration">proc </aside>remove_area_power_relationship<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L251"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 251"></a></aside></h3><p>proc to call when the machine stops requiring power after a duration of requiring power
saves memory by removing the power relationship with its area if it exists and loses area sensitivity
does not affect power usage itself</p><h3 id="proc/set_inserted_disk"><aside class="declaration">proc </aside>set_inserted_disk<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a>/disk)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L6"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 6"></a></aside></h3><p>Setter for inserted disk.</p><h3 id="proc/set_internal_disk"><aside class="declaration">proc </aside>set_internal_disk<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/disk/data.html">disk/data</a>/disk)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L2"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 2"></a></aside></h3><p>Setter for internal disk.</p><h3 id="proc/set_is_operational"><aside class="declaration">proc </aside>set_is_operational<aside>(new_value)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L535"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 535"></a></aside></h3><p>Called when we want to change the value of the <code>is_operational</code> variable. Boolean.</p><h3 id="proc/set_machine_stat"><aside class="declaration">proc </aside>set_machine_stat<aside>(new_value)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L298"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 298"></a></aside></h3><p>Called when we want to change the value of the machine_stat variable. Holds bitflags.</p><h3 id="proc/setup_area_power_relationship"><aside class="declaration">proc </aside>setup_area_power_relationship<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L237"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 237"></a></aside></h3><p>proc to call when the machine starts to require power after a duration of not requiring power
sets up power related connections to its area if it exists and becomes area sensitive
does not affect power usage itself</p><h3 id="proc/spawn_frame"><aside class="declaration">proc </aside>spawn_frame<aside>(disassembled, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L794"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 794"></a></aside></h3><p>Spawns a frame where this machine is. If the machine was not disassmbled, the
frame is spawned damaged. If the frame couldn't exist on this turf, it's smashed
down to metal sheets.</p>
<p>Arguments:</p>
<ul>
<li>disassembled - If FALSE, the machine was destroyed instead of disassembled and the frame spawns at reduced integrity.</li>
<li>user - The mob that initiated the disassembly, if any.</li>
</ul><h3 id="proc/toggle_disk"><aside class="declaration">proc </aside>toggle_disk<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery_disk.dm#L63"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery_disk.dm 63"></a></aside></h3><p>Toggle the selected disk between internal and inserted.</p><h3 id="proc/try_put_in_hand"><aside class="declaration">proc </aside>try_put_in_hand<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/object, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L388"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 388"></a></aside></h3><p>Puts passed object in to user's hand</p>
<p>Puts the passed object in to the users hand if they are adjacent.
If the user is not adjacent then place the object on top of the machine.</p>
<p>Vars:</p>
<ul>
<li>object (obj) The object to be moved in to the users hand.</li>
<li>user (mob/living) The user to recive the object</li>
</ul><h3 id="proc/unlink_from_jack"><aside class="declaration">proc </aside>unlink_from_jack<aside>(ignore_check)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/datanet/_networked.dm#L73"><img src="git.png" width="16" height="16" title="code/game/machinery/datanet/_networked.dm 73"></a></aside></h3><p>Unlink from a network terminal
<code>ignore_check</code> is used as part of machinery destroy.</p><h3 id="proc/unset_static_power"><aside class="declaration">proc </aside>unset_static_power<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L468"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 468"></a></aside></h3><p>internal proc that removes all static power usage from the current area</p><h3 id="proc/update_current_power_usage"><aside class="declaration">proc </aside>update_current_power_usage<aside>()  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L513"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 513"></a></aside></h3><p>makes this machine draw power from its area according to which use_power mode it is set to</p><h3 id="proc/update_mode_power_usage"><aside class="declaration">proc </aside>update_mode_power_usage<aside>(use_power_mode, new_usage)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L488"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 488"></a></aside></h3><p>sets the power_usage linked to the specified use_power_mode to new_usage
e.g. update_mode_power_usage(ACTIVE_POWER_USE, 10) sets active_power_use = 10 and updates its power draw from the machines area if use_power == ACTIVE_POWER_USE</p>
<p>Arguments:</p>
<ul>
<li>use_power_mode - the use_power power mode to change. if IDLE_POWER_USE changes idle_power_usage, ACTIVE_POWER_USE changes active_power_usage</li>
<li>new_usage - the new value to set the specified power mode var to</li>
</ul><h3 id="proc/update_power_channel"><aside class="declaration">proc </aside>update_power_channel<aside>(new_power_channel)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L451"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 451"></a></aside></h3><p>updates the power channel this machine uses. removes the static power usage from the old channel and readds it to the new channel</p><h3 id="proc/update_use_power"><aside class="declaration">proc </aside>update_use_power<aside>(new_use_power)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/game/machinery/_machinery.dm#L421"><img src="git.png" width="16" height="16" title="code/game/machinery/_machinery.dm 421"></a></aside></h3><p>updates the use_power var for this machine and updates its static power usage from its area to reflect the new value</p><h3 id="proc/use_power_from_net"><aside class="declaration">proc </aside>use_power_from_net<aside>(amount, take_any)  <a href="https://github.com/DaedalusDock/daedalusdock/blob/a11ad7c401daeb2805315aa8820f21ea7c1bf233/code/modules/power/power.dm#L140"><img src="git.png" width="16" height="16" title="code/modules/power/power.dm 140"></a></aside></h3><p>Attempts to draw power directly from the APC's Powernet rather than the APC's battery. For high-draw machines, like the cell charger</p>
<p>Checks the surplus power on the APC's powernet, and compares to the requested amount. If the requested amount is available, this proc
will add the amount to the APC's usage and return that amount. Otherwise, this proc will return FALSE.
If the take_any var arg is set to true, this proc will use and return any surplus that is under the requested amount, assuming that
the surplus is above zero.
Args:</p>
<ul>
<li>amount, the amount of power requested from the Powernet. In standard loosely-defined SS13 power units.</li>
<li>take_any, a bool of whether any amount of power is acceptable, instead of all or nothing. Defaults to FALSE</li>
</ul></main><footer>daedalus.dme <a href="https://github.com/DaedalusDock/daedalusdock/tree/a11ad7c401daeb2805315aa8820f21ea7c1bf233">a11ad7c</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>